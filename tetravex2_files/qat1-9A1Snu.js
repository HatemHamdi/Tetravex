/*!CK:3184403319!*//*1428430918,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["qqk1i"]); }

__d("PrivacyRemindersLoggingTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"};},null);
__d("SuggestionConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={GROUP_POST_COMPOSER:"grouppostcomposer",OG_SUGGESTION_BY_INPUT:"ogsuggestionbyinput",COMPOSER_ENTRY_BOOTSTRAP:"composerentrybootstrap",MTOUCH_COMPOSER_ENTRY_BOOTSTRAP:"mtouchcomposerentrybootstrap",MTOUCH_COMPOSER_LOAD_VERBS:"mtouchcomposerloadverbs"};},null);
__d("SuggestionUIPresentation",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FLYOUT:1,TAGGER_BADGE:2,ADD_TAG:3,SEMI_INLINE:4,TOP_OF_VERBS:5};},null);
__d("TagExpansionButtonConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null);
__d("ComposerXAttachmentButtonBarState",["CSS","DOMQuery","csx","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={trackCityChanges:function(l){var m=l.getComponent('citysharericon');if(m)return m.instance.subscribe('change',function(){k.updateMessageBoxBarState(l);});},updateMessageBoxBarState:function(l){var m=l.getComponent('citysharericon');if(m){var n=h.find(l.getRoot(),"._1dsp");g.conditionClass(n,"_icv",!!m.instance.getValue());}}};e.exports=k;},null);
__d("ComposerXAttachmentPrefillMixin",["Event","InputSelection"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={_initPrefill:function(j,k){this._textArea=j;this._didInitialFocus=false;this._prefill=k;if(this._prefill)this._focusListener=g.listen(this._textArea,'focus',this._prefillOnFocus.bind(this));},_resetPrefill:function(){this._didInitialFocus=false;},_prefillOnFocus:function(){if(!this._didInitialFocus&&this._prefill&&this._textArea.value===''){this._textArea.value=this._prefill;h.set(this._textArea,0,0);}this._didInitialFocus=true;}};e.exports=i;},null);
__d("ComposerXAttachmentUtils",["BrowserSupport","Button","ComposerXController","DataStore","DOMQuery","Event","Focus","Keys","Run","StickyPlaceholderInput","UserAgent_DEPRECATED","csx","debounce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t='composer_fixed_placeholder';function u(w,x){if(!j.get(w.element,t,false))w.instance.setPlaceholder(x);}var v={initMentions:function(w,x,y,z){u(w,x);if(!z||!z.dontFocusMentions)v.focusMentions(w);this.registerMentionsForComposerCancel(w,y);},focusMentions:function(w){var x=k.find(w.element,'textarea.input');m.set(x);},registerMentionsForComposerCancel:function(w,x){i.registerConditionForComposerCancel(x,w.instance.hasChanges.bind(w.instance));},setStickyPlaceholderForMentions:function(w,x){u(w,x);},setPlaceholderIsFixed:function(w,x){j.set(w.element,t,!!x);},setStickyPlaceholderForTypeahead:function(w,x){var y=k.find(w,'.textInput');p.setPlaceholderText(y,x);},listenForPostSubmission:function(w){l.listen(w,'keydown',function(event){var x=event.getModifiers(),y=q.osx()?x.meta:x.control,z=k.find(w.form,"._11b"+'[type="submit"]');if((event.keyCode===n.RETURN)&&y&&h.isEnabled(z)){w.blur();if(l.fire(z,'click'))l.fire(w.form,'submit');event.preventDefault();}});},disableSaveOnEmpty:function(w,x){var y=k.find(w,'.textInput'),z=s(function(ba){h.setEnabled(x,y.value.trim().length!==0);},50),aa=[];aa.push(l.listen(y,'keyup',z));if(g.hasClipboardEvents()){aa.push(l.listen(y,'cut',z));aa.push(l.listen(y,'paste',z));}else{aa.push(l.listen(y,'mouseout',z));aa.push(l.listen(y,'mousemove',z));}o.onUnload(function(){for(var ba=0;ba<aa.length;ba++)aa[ba].remove();aa=null;});}};e.exports=v;},null);
__d("DynamicIconSelector",["Button","CSS","DOM","SelectorDeprecated"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={swapIcon:function(l){var m=j.getSelectedOptions(l)[0],n=m&&i.scry(m,'.itemIcon')[0],o=j.getSelectorButton(l);if(n){g.setIcon(o,n.cloneNode(true));}else{var p=i.scry(o,'.img')[0];p&&i.remove(p);}h.conditionClass(o,'uiSelectorChevronOnly',!n);}};j.subscribe('change',function(l,m){var n=m.selector;if(h.hasClass(n,'dynamicIconSelector'))k.swapIcon(n);});e.exports=k;},null);
__d("PrivacySelectorOption",["Arbiter","AudienceSelectorTags","CSS","CurrentUser","DOM","DynamicIconSelector","Parent","PrivacyConst","SelectorDeprecated","copyProperties","csx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();function t(u,v){if(!u)throw new Error("there's no DOM option. Config data: ",v);this._elem=u;this._selector=m.byClass(this._elem,'audienceSelector');if(!this._selector)return;this._priv_base_val=v.priv_base_val;this._audienceCount=v.audience_count||"";this._hasRestricted=v.has_restricted||false;this._isCustom=v.is_custom||false;this._includedAudience=v.included||"";this._excludedAudience=v.excluded||{};this._excludedTaggees={};this._tagExpansionBehavior=v.tag_expansion_behavior||n.TagExpansion.NONE;this._plusLabel=k.scry(u,'.plusLabel')[0];this._audienceCountLabel=k.scry(u,'.audienceCountLabel')[0];this._taggedIDs=[];this._tags=[];this._recalculateTooltipAndLabel();this._updateOptionCountLabel();this._updateSelector();g.subscribe('Composer/changedtags',function(w,x){var y=i.hasClass(this._selector,'composerAudienceSelector');if(!this._getChangedData()||!y)return;this._tags=[];this._taggedIDs=[];for(var z=0;z<x.withTags.length;z++){var aa=x.withTags[z].info;if(aa.uid!=j.getID()){this._tags.push(aa.text);this._taggedIDs.push(aa.uid);}}for(z in x.mention)if(x.mention[z].type=='user'&&x.mention[z].uid!=j.getID()){this._tags.push(x.mention[z].text);this._taggedIDs.push(x.mention[z].uid);}var ba=k.scry(document.body,"._5l7q")[0];ba&&!!this._taggedIDs.length&&i.hide(ba);this._updateOptionCountLabel();var ca=this._recalculateTooltipAndLabel();if(ca&&o.isOptionSelected(this._elem)){this._updateSelector();g.inform('SelectedPrivacyOption/changed',this._getChangedData());}}.bind(this));o.listen(this._selector,'change',this._updateSelector.bind(this));}p(t.prototype,{updateOption:function(u,v,w,x,y){this._priv_base_val=u;this._includedAudience=v;this._excludedAudience=w;this._tagExpansionBehavior=x;this._audienceCount=y;this._recalculateTooltipAndLabel();this._updateOptionCountLabel();return {label:this._label,tooltip:this._tooltip};},_recalculateTooltipAndLabel:function(){var u=this._label;this._label=this._getNewSelectorLabel();var v=this._tooltip;this._tooltip=this._getNewTooltip();return (v!=this._tooltip)||(u!=this._label);},_getNewTooltip:function(){if(this._isCustom)return this._recalcCustomTooltip();switch(this._priv_base_val){case n.FriendsValue.ALL_FRIENDS:return this._recalcFriendsTooltip();case n.FriendsValue.FRIENDS_MINUS_ACQUAINTANCES:return this._recalcFriendsMinusTooltip();case n.FriendsValue.SELF:var u=this._getTagExpansionText();return u?u:this._getIncludedAudience();default:return this._recalcCustomTooltip();}},_getNewSelectorLabel:function(){var u=this._elem.getAttribute('data-label').replace(/\(.*\)/,"");if(this._showAudienceCount()){var v=' ('+this._audienceCount+')';u+=v;}if(this._isTagExpanded())u+=' (+)';return u;},_updateOptionCountLabel:function(){if(this._audienceCountLabel){if(this._showAudienceCount()){var u=' ('+this._audienceCount+')';k.setContent(this._audienceCountLabel,u);}i.conditionShow(this._audienceCountLabel,this._showAudienceCount());}this._plusLabel&&i.conditionShow(this._plusLabel,this._isTagExpanded());},_getChangedData:function(){return {tags:this._taggedIDs,privacy:this._priv_base_val};},_showAudienceCount:function(){return (this._audienceCountLabel&&this._audienceCount&&this._audienceCount.length>0);},_isTagExpanded:function(){var u=this._getTagExpansionBehavior(),v=!!this._taggedIDs.length||this._alreadyHasTags();return (v&&u!=n.TagExpansion.NONE);},_alreadyHasTags:function(){var u=k.scry(this._selector,'*[data-oid]')[0];u=u&&u.getAttribute('data-oid');return u&&h.hasTags(u);},_updateSelector:function(){if(!this._isSharedAlbum()&&o.isOptionSelected(this._elem)){var u=i.hasClass(this._selector,'composerAudienceSelector');u&&o.setButtonLabel(this._selector,this._label);o.setButtonTooltip(this._selector,this._tooltip);l.swapIcon(this._selector);return false;}return true;},_isSharedAlbum:function(){var u=k.scry(this._selector,'*[data-shared-album]')[0];return u&&u.getAttribute('data-shared-album');},_getTagExpansionBehavior:function(){if(this._tagExpansionBehavior)return this._tagExpansionBehavior;var u=this._priv_base_val===n.FriendsValue.SELF,v=this._priv_base_val===n.FriendsValue.EVERYONE;if((u&&this._isSharedAlbum())||v){return n.TagExpansion.NONE;}else if(this._priv_base_val<n.FriendsValue.ALL_FRIENDS)return n.TagExpansion.TAGGEES;return n.TagExpansion.FRIENDS_OF_TAGGEES;},_getTagExpansionText:function(){var u=this._getTagExpansionBehavior();if(!!this._taggedIDs.length||this._alreadyHasTags()){if(u==n.TagExpansion.FRIENDS_OF_TAGGEES){return r._("amis des personnes identifi\u00e9es");}else if(u==n.TagExpansion.TAGGEES)return r._("Toutes les personnes identifi\u00e9es");return '';}return '';},_getIncludedAudience:function(){if(this._includedAudience)return this._includedAudience;var u=this._priv_base_val===n.FriendsValue.SELF;if(u&&!this._isSharedAlbum())return r._("Moi uniquement");return this._elem.getAttribute('data-label');},_getCombinedSentence:function(u,v){if(!v)return u;return r._("{list of people who can see this}\u00a0; Sauf\u00a0: {list of people who cannot see this}",[r.param("list of people who can see this",u),r.param("list of people who cannot see this",v)]);},_recalcFriendsTooltip:function(){var u=this._tags.length;if(u>2){return this._hasRestricted?r._("Vos amis et les amis des personnes identifi\u00e9es\u00a0; sauf\u00a0: Restreint"):r._("Vos amis et ceux des personnes identifi\u00e9es");}else if(u==2){if(this._hasRestricted){return r._("Vos amis, les amis de {user} et les amis de {user2}\u00a0; sauf\u00a0: Restreint",[r.param("user",this._tags[0]),r.param("user2",this._tags[1])]);}else return r._("Vos amis, ceux de {user} et de {user2}",[r.param("user",this._tags[0]),r.param("user2",this._tags[1])]);}else if(u==1){if(this._hasRestricted){return r._("Vos amis et les amis de {user}\u00a0; sauf\u00a0: Restreint",[r.param("user",this._tags[0])]);}else return r._("Vos amis et ceux de {user}",[r.param("user",this._tags[0])]);}else return this._hasRestricted?r._("Vos amis\u00a0; sauf\u00a0: Restreint"):r._("Vos amis");},_recalcFriendsMinusTooltip:function(){var u=this._tags.length;if(u>0||this._alreadyHasTags()){var v=r._("amis des personnes identifi\u00e9es"),w=r._("{people who can see this}, {list of more people who can see this}",[r.param("people who can see this",r._("Vos amis")),r.param("list of more people who can see this",v)]),x=r._("Connaissances");if(this._hasRestricted)x=r._("{Name of Acquaintances friend list}, {restricted}",[r.param("Name of Acquaintances friend list",x),r.param("restricted",r._("Restreint"))]);return this._getCombinedSentence(w,x);}else{if(this._hasRestricted)return r._("Amis, sauf Connaissances, Restreint");return r._("Amis sauf connaissances");}},_recalcCustomTooltip:function(){var u=this._getIncludedAudience(),v=this._getTagExpansionText();if(v)u=r._("{list of people who can see this}, {list of additional people who can see this}",[r.param("list of people who can see this",u),r.param("list of additional people who can see this",v)]);for(var w=0;w<this._taggedIDs.length;w++){x=this._taggedIDs[w];if(x in this._excludedAudience){delete this._excludedAudience[x];this._excludedTaggees[x]=this._tags[w];break;}}for(var x in this._excludedTaggees)if(this._excludedTaggees.hasOwnProperty(x))if(this._taggedIDs.indexOf(x)===-1){this._excludedAudience[x]=this._excludedTaggees[x];delete this._excludedTaggees[x];break;}var y=[];for(w in this._excludedAudience)if(this._excludedAudience.hasOwnProperty(w))y.push(this._excludedAudience[w]);return this._getCombinedSentence(u,s(y));}});e.exports=t;},null);
__d("CustomPrivacyOptionController",["Arbiter","AsyncDialog","AsyncRequest","DOM","Event","Form","Parent","PrivacyConst","PrivacySelectorOption","SelectorDeprecated","XPrivacyCustomDialogController","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(t,u){if(!t)return;setTimeout((function(){this._selector=m.byClass(t,'audienceSelector');if(!this._selector)return;this.initCustomState(t,u.option_id,u.id);var v={priv_base_val:u.base_audience_value,audience_count:u.audience_count,is_custom:true,included:u.included_audience,excluded:u.excluded_audience,tag_expansion_behavior:u.tag_expansion_behavior};this._optionJSInstance=new o(t,v);k.listen(t,'click',function(event){this.openCustomDialog(event,u.option_id,u.explain_tags,u.autosave,u.limit_community,u.limit_facebook,u.limit_fof,u.limit_tagexpand,u.source);}.bind(this));p.listen(this._selector,'select',function(w){if(w.option._id!=this._id)this.clearCustomState();}.bind(this));}).bind(this),0);}r(s,{_instances:{},update:function(t,u,v,w,x,y,z,aa,ba){var ca=s._instances[t];ca._update(u,v)._updateOption(v,x,y,z,aa,ba);g.inform('Form/change',{node:ca._container});},getData:function(t){var u=s._instances[t];return u&&u._privacyData;},setPrivacyData:function(t,u,v){s._instances[t]._update(u,v);}});r(s.prototype,{_updateOption:function(t,u,v,w,x,y){var z=p.getOption(this._selector,t)||p.getOption(this._selector,n.BaseValue.CUSTOM+''),aa=this._optionJSInstance.updateOption(u,v,w,x,y);g.inform('CustomPrivacyOptionController/update',{selector:this._selector,option:z,tooltip:aa.tooltip,label:aa.label});return this;},_update:function(t,u){var v=u==n.BaseValue.CUSTOM||!p.getOption(this._selector,u),w=this._selector.getAttribute('data-name');this.updateCustomState(t,v,w);return this;},initCustomState:function(t,u,v){s._instances[u]=this;this._container=j.find(t,'.customPrivacyInputs');this._id=v;this._privacyData={};var w=l.serialize(this._container);if(w.audience)this._privacyData=w.audience[v];return t;},openCustomDialog:function(event,t,u,v,w,x,y,z,aa){var ba=q.getURIBuilder().setString('option_id',t).setString('id',this._id).setString('privacy_data',JSON.stringify(this._privacyData)).setBool('explain_tags',u).setBool('autosave',v).setBool('limit_community',w).setBool('limit_facebook',x).setBool('limit_fof',y).setBool('limit_tagexpand',z).setBool('is_new_privacy_selector',false).setString('source',aa).getURI(),ca=new i(ba);ca.setRelativeTo(event.getTarget());h.send(ca,function(da){da.subscribe('cancel',function(){g.inform('CustomPrivacyOptionController/cancel',{selector:this._selector});}.bind(this));}.bind(this));},updateCustomState:function(t,u,v){this.clearCustomState();this._privacyData=r({},t);if(u)if(v){v=v.slice(0,-'[value]'.length);var w={};w[v]=t;l.createHiddenInputs(w,this._container,null,true);}},clearCustomState:function(){this._privacyData={};j.empty(this._container);}});e.exports=s;},null);
__d("AudienceSelector",["Arbiter","AsyncRequest","AudienceSelectorTags","CSS","CustomPrivacyOptionController","DOM","DynamicIconSelector","PrivacyConst","SelectorDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={};o.subscribe('select',function(r,s){if(!j.hasClass(s.selector,'audienceSelector'))return;var t=o.getOptionValue(s.option);s.value=t;g.inform('AudienceSelector/changed',s);if(t==n.BaseValue.CUSTOM&&!j.hasClass(s.option,'noDialog')){o.toggle(s.selector);return false;}g.inform('AudienceSelector/changedNonCustomDialogButton',s);if(j.hasClass(s.selector,'dataTooltip')){var u=l.find(s.option,'.itemAnchor').getAttribute('data-tooltip');o.setButtonTooltip(s.selector,u||null);}if(!j.hasClass(s.option,'specialOption'))return;var v=l.find(s.option,'a').getAttribute('data-type');if(j.hasClass(s.option,'moreOption')){j.addClass(s.selector,v);j.addClass(s.selector,'showSecondaryOptions');return false;}else if(j.hasClass(s.option,'returnOption')){j.removeClass(s.selector,'showSecondaryOptions');j.removeClass(s.selector,'friendList');return false;}});var q={keepSynchronized:function(r,s){p[r]||(p[r]={});p[r][s.id]=s;},setHasTags:function(r){i.setHasTags(r);},getComposerInstance:function(){var r=p['PrivacyLiteNav/audience'];if(r){var s;for(var t in r){s=r[t];return s;}}return null;},forceAndKeepSynchronized:function(r,s){q.keepSynchronized(r,s);g.inform('AudienceSelector/update',{option:o.getSelectedOptions(s)[0],selector:s});},get:function(r){if(j.hasClass(r,'audienceSelector'))return r;var s=l.scry(r,'div.audienceSelector');if(s.length!=1)return;return s[0];},setAudience:function(r,s){var t=q.get(r);o.loadMenu(t,function(u){o.setSelected(t,s.toString());m.swapIcon(t);var v=o.getSelectedOptions(t),w=v[0]&&l.find(v[0],'a');if(w&&w.getAttribute('ajaxify'))h.bootstrap(w.getAttribute('ajaxify'),w,true);g.inform('AudienceSelector/changed',{option:v[0],selector:t});});}};g.subscribe('CustomPrivacyOptionController/update',function(r,s){if(!j.hasClass(s.selector,'audienceSelector'))return;o.setSelected(s.selector,o.getOptionValue(s.option));m.swapIcon(s.selector);var t=j.hasClass(s.selector,'composerAudienceSelector'),u=j.hasClass(s.selector,'inlineAudienceWidget');if(t||u)o.setButtonLabel(s.selector,s.label);o.setButtonTooltip(s.selector,s.tooltip);g.inform('AudienceSelector/update',s);});g.subscribe(['AudienceSelector/changed','AudienceSelector/update'],function(event,r){var s=o.getOptionValue(r.option),t={};if(s==n.BaseValue.CUSTOM){if(event=='AudienceSelector/changed')return;t=k.getData(r.option.id);if(!t)return;}else if(j.hasClass(r.selector,'inlineAudienceWidget'))o.setButtonLabel(r.selector,r.option.innerText);for(var u in p){var v=p[u];if(v[r.selector.id]){g.inform('AudienceSelector/syncNonSelectorIcon',{category:u});for(var w in v){var x=v[w];if(!x||r.selector===x)continue;if(o.getValue(x)!==s){o.setSelected(x,s);m.swapIcon(x);}if(s==n.BaseValue.CUSTOM){var y=o.getOption(x,n.BaseValue.CUSTOM+'');if(y){k.setPrivacyData(y.id,t,s);o.setButtonTooltip(x,r.tooltip);}}}}}});e.exports=q;},null);
__d("XPrivacyAudienceAlignmentLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/audience_alignment\/log\/",{client_time:{type:"Int"},event:{type:"Enum",required:true,enumType:1},product:{type:"Enum",required:true,enumType:1}});},null);
__d("AudienceAlignment",["Arbiter","AsyncRequest","AudienceSelector","ComposerXStore","ContextualDialog","CSS","cx","DialogExpansion","DOM","Event","Focus","Keys","ModalMask","PrivacyConst","SelectorDeprecated","Style","XPrivacyAudienceAlignmentLoggingController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x=false,y,z;function aa(wa,xa){wa.setContext(xa);wa.show();}function ba(wa,xa){var ya=v.get(xa.getContentRoot(),'margin-top');wa.setWidth(this.aaa_dialog_width);wa.show();v.set(wa.getContentRoot(),'margin-top',ya);}var ca='wwwtux',da='wwwroadblock',ea='exposed',fa='friends_sticky',ga='public_sticky',ha='selector',ia='holdout',ja='dismissal',ka='learn_more',la='blur';function ma(wa,event){var xa=w.getURIBuilder().setEnum('product',wa).setEnum('event',event).setInt('client_time',Date.now()).getURI(),ya=new h().setURI(xa);ya.send();}function na(wa,xa,ya,za){if(x)return false;if(!o.contains(document.body,wa.getRoot()))return false;var ab=j.get(xa,'maininput');if(ab&&ab.instance.getValue())return false;if(!ya)return false;var bb=null;if(za){bb=za.getSelectedBaseValue();}else bb=parseInt(u.getValue(ya),10);return (bb===t.BaseValue.EVERYONE);}function oa(){var wa=o.scry(document.body,'#pagelet_timeline_recent');if(wa.length>=1){var xa=o.scry(wa[0],'li.fbTimelineComposerCapsule');if(xa.length>=1)return xa[0];}return null;}function pa(wa,xa,ya,za){var ab;if(za){ab=za.getMenuElement();}else{var bb=o.find(ya,'div.audienceSelector');ab=o.scry(bb,'div.wrap');}if(ab.length<1)return;var cb=oa(),db;if(za){za.subscribeOnce('open',function(){if(cb)l.addClass(cb,"_2wc-");k.setContext(xa,ab);xa.setOffsetY(30);xa.show();});}else db=u.listen(bb,'open',function(){var gb=o.scry(ab[0],'div.uiSelectorMenuWrapper');if(gb.length>0){if(cb)l.addClass(cb,"_2wc-");k.setContext(xa,gb[0]);xa.setOffsetX(12);xa.show();}else s.hide();u.unsubscribe(db);});if(za){za.getPopover().subscribeOnce('hide',function(){qa(xa,ab,cb,wa);});}else var eb=u.listen(bb,'close',function(){qa(xa,ab[0],cb,wa);u.unsubscribe(eb);});if(za){l.addClass(ab,"_35mn");var fb=za.getTriggerButtonElement();l.addClass(fb,"_35mn");}else l.addClass(ab[0],"_35mn");setTimeout(function(){s.show();v.set(s.getNode(),'opacity','0.3');v.set(s.getNode(),'background-color','rgb(0,0,0)');if(za){za.openSelectorExpanded();}else u.toggle(bb);},20);}function qa(wa,xa,ya,za){s.hide();wa.hide();l.removeClass(xa,"_35mn");if(ya)l.removeClass(ya,"_2wc-");q.set(o.find(za.getRoot(),'textarea.input'));}function ra(wa,xa){wa.unsubscribe(y);wa.hide();q.set(o.find(xa.getRoot(),'textarea.input'));}function sa(wa){var xa=ua(wa);return xa&&xa.element;}function ta(wa){var xa=ua(wa);return xa&&xa.instance&&xa.instance.getInstance().getInstance();}function ua(wa){return j.get(wa,'mainprivacywidget');}var va={abort:function(){x=true;},startOnComposerFocus:function(wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb){var mb=da;if(ib)mb=ca;g.subscribe('composer/focus',function(){var nb=sa(lb),ob=ta(lb);if(na(xa,lb,nb,ob))if(wa){ma(mb,ia);}else{ma(mb,ea);setTimeout(function(){ya.show();var pb=gb.parentElement;this.aaa_dialog_width=ya.getWidth()+pb.offsetWidth-490;var qb=new n(ya);qb.setTargetWidth(this.aaa_dialog_width);qb._onAfterShow();q.set(ya.getRoot());},100);}});p.listen(fb,'click',function(){var nb=sa(lb),ob=ta(lb);ra(ya,xa);if(ob){ob.selectOption(t.PostParam.FRIENDS);}else i.setAudience(xa.getRoot(),t.BaseValue.ALL_FRIENDS);aa(za,nb);ma(mb,fa);});p.listen(gb,'click',function(){var nb=sa(lb),ob=ta(lb);ra(ya,xa);if(ob){ob.selectOption(t.PostParam.EVERYONE);}else i.setAudience(xa.getRoot(),t.BaseValue.EVERYONE);aa(ab,nb);ma(mb,ga);});p.listen(hb,'click',function(){ya.subscribe('hide',function(){var nb=sa(lb),ob=ta(lb);if(bb)pa(xa,bb,nb,ob);});ra(ya,xa);ma(mb,ha);});if(ib)p.listen(ib,'click',function(){var nb=sa(lb);ra(ya,xa);ma(mb,ja);if(cb)aa(cb,nb);});y=ya.subscribe('hide',function(){var nb=sa(lb);q.set(o.find(xa.getRoot(),'textarea.input'));ma(mb,ja);if(db)aa(db,nb);});z=ya.subscribe('blur',function(){ma(mb,la);});p.listen(jb,'click',function(event){ba(eb,ya);ma(mb,ka);});p.listen(kb,'click',function(event){eb.hide();});if(ib)p.listen(eb.getRoot(),'keydown',function(event){if(p.getKeyCode(event)===r.ESC){eb.hide();p.kill(event);}});}};e.exports=va;},null);
__d("ComposerXAttachmentWithPreviews",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={initPreviewButton:function(i,j){g.inform('page_composer_preview_form_initialized',i);}};e.exports=h;},null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/reminders\/log_imp\/",{type:{type:"String",required:true}});},null);
__d("ComposerXBootloadStatusAttachment",["requireWeak","Arbiter","AsyncRequest","AudienceAlignment","Bootloader","ComposerXAttachment","ComposerXAttachmentButtonBarState","ComposerXAttachmentPrefillMixin","ComposerXAttachmentUtils","ComposerXAttachmentWithPreviews","ComposerXController","ComposerXDragDrop","ComposerXMarauderLogger","ComposerXStore","CSS","DOM","DOMQuery","Event","Focus","LitestandMessages","NoNewerStoryInsertionWhileComposingGK","PagesComposerEntryLogger","Parent","FocusListener","PrivacyConst","PrivacyRemindersLoggingTypes","SelectorDeprecated","SubscriptionsHandler","SuggestionConfig","SuggestionUIPresentation","URI","XUIError","classWithMixins","copyProperties","createCancelableFunction","csx","cx","fbt","getActiveElement","mixin","requestAnimationFrame","XPrivacyRemindersDismissController","XPrivacyRemindersImpressionLoggingController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa){b.__markCompiled&&b.__markCompiled();var xa;g(['LitestandStoryInsertionStatus'],function(eb){xa=eb;});var ya={only_me:{PRIVACY_CONSTANT:[ea.BaseValue.SELF],LOG_IMPRESSION:fa.ONLY_ME_IMPRESSION,LOG_CONVERSION:fa.ONLY_ME_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone:{PRIVACY_CONSTANT:[ea.BaseValue.EVERYONE],LOG_IMPRESSION:fa.EVERYONE_IMPRESSION,LOG_CONVERSION:fa.EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},delta_everyone:{PRIVACY_CONSTANT:[ea.BaseValue.EVERYONE],LOG_IMPRESSION:fa.DELTA_EVERYONE_IMPRESSION,LOG_CONVERSION:fa.DELTA_EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone_tests:{PRIVACY_CONSTANT:[ea.BaseValue.EVERYONE],LOG_IMPRESSION:fa.EVERYONE_TESTS_IMPRESSION,LOG_CONVERSION:fa.EVERYONE_TESTS_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},public_posting_filter_nux:{PRIVACY_CONSTANT:[ea.BaseValue.EVERYONE],LOG_IMPRESSION:fa.PUBLIC_POSTING_FILTER_NUX_IMPRESSION,LOG_CONVERSION:fa.PUBLIC_POSTING_FILTER_NUX_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true}},za={},ab=ma(l,ta(n,p));for(var bb in ab)if(ab.hasOwnProperty(bb))db[bb]=ab[bb];var cb=ab===null?null:ab.prototype;db.prototype=Object.create(cb);db.prototype.constructor=db;db.__superConstructor__=ab;function db(eb,fb){"use strict";ab.call(this);this._root=eb;this._config=fb;this._privacyReminders={};this._onSelectorChange=this._onSelectorChange.bind(this);if(xa&&aa.no_insertion_while_composing)xa.registerBlocker(function(){return this._isFocused();}.bind(this));}db.prototype.getRoot=function(){"use strict";return this._root;};db.prototype.getPrivacyInstance=function(){"use strict";return this._newPrivacyWidgetInstance;};db.prototype._getTextArea=function(){"use strict";return w.find(this.getComponent('maininput').element,'textarea.input');};db.prototype.initWithComponents=function(eb){"use strict";za[this._composerID]=this;this._attachmentIsActive=true;var fb=this._getTextArea(),gb=w.scry(ca.byClass(this.getRoot(),"_119"),'li.'+this.attachmentClassName)[0];this._focusListener=x.listen(fb,'focus',this._onFocus.bind(this));if(this._config.prefill_text)this._initPrefill(fb,this._config.prefill_text);if(eb&&this._config.targetIsPage){this._pagesComposerEntryLogger=new ba(this._config.targetID);this._pagesComposerEntryLogger.registerForContentEntryEvents(fb);}if(this._fullVersion){this._fullInitWithComponents();}else if(!this._bootloading)if(this._isFocused()){this._onFocus();}else if(gb)this._clickListener=x.listen(gb,'click',function(){y.set(fb);}.bind(this));this._dragEnterHandler=h.subscribe('dragenter',function(hb,ib){if(ib.element==this._root){j.abort();var jb=ib.event.dataTransfer.items,kb;if(jb)kb=r.filterImages(jb);if(kb&&kb.length>0){y.set(fb);}else{var lb=ca.byClass(this._root,'focus_target');da.expandInput(lb);this._onFocus();}}}.bind(this));this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(!eb)y.set(fb);if(this._config.plus_version){this._dragdrop=new r(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();}this._initPrivacyWidgetInstance();if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);if(this._config.previewButton)this.initPreviewButton(this._root,this._config.previewButton);};db.prototype._initPrivacyWidgetInstance=function(){"use strict";var eb=this.getComponent('mainprivacywidget');if(!eb)return;this._privacyWidgetElement=eb.element;this._newPrivacyWidgetInstance=eb.instance&&eb.instance.getInstance().getInstance();if(this._newPrivacyWidgetInstance){var fb=this.getComponent('maininput').instance&&this.getComponent('maininput').instance.getMentions(),gb=this.getComponent('tagExpansionButton');(gb&&gb.instance)&&gb.instance.listenToPrivacy(this._newPrivacyWidgetInstance,fb);}};db.prototype._fullInitWithComponents=function(eb){"use strict";this._bootloadCallback=oa(this._bootloadModules.bind(this));if(eb&&eb.show_tag_expansion_reminder){k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI","ComposerTagReminder"],this._bootloadCallback);}else k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI"],this._bootloadCallback);Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);if(this._setEveryonePrivacyImpression)this._showPrivacyReminder('everyone');if(this._privacyReminders.delta_everyone&&this._privacyReminders.delta_everyone.dialog){var fb=this._privacyReminders.delta_everyone.dialog.getContent();if(fb){var gb=w.scry(fb,'.photoText')[0],hb=w.scry(fb,'.postText')[0];h.subscribe('multi-upload/images-added',function(){gb&&u.show(gb);hb&&u.hide(hb);}.bind(this));h.subscribe('multi-upload/all-images-removed',function(){gb&&u.hide(gb);hb&&u.show(hb);}.bind(this));}}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.subscribe('changed',this._onSelectorChange);}else ga.subscribe('select',this._onSelectorChange);};db.prototype._bootloadModules=function(eb,fb,gb,hb,ib){"use strict";this._modulesAreBootloaded=true;this._tagger.init(this);this._privacyWidgetTags=new eb(this);if(ib){this._tagExpansionReminder=new ib(this);this._tagExpansionReminder.listen();}m.trackCityChanges(this);var jb=w.find(this.getComponent('maininput').element,'textarea.input');if(!this._scraper){this._scraper=new fb(jb);this._scraper.subscribe('match',function(mb,nb){var ob=this._getScraperEndpoint();ob.addQueryData({scrape_url:encodeURIComponent(nb.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});q.getAttachment(this._root,ob.toString());}.bind(this));}this._scraper.enable();this._scraper.check();var kb=v.scry(this._root,"._4-jj"),lb=this.getComposerID();if(this._config.stream_context==='home'&&kb&&kb.length&&this._tagger&&lb)if(!this._suggestionScraper){this._suggestionScraper=new gb(this._tagger,kb[0],[ja.SEMI_INLINE,ja.TAGGER_BADGE,ja.TOP_OF_VERBS],lb);this._suggestionScraper.setInputTriggerConfig(ia.OG_SUGGESTION_BY_INPUT,jb);this._suggestionScraper.setBootloadTriggerConfig(ia.COMPOSER_ENTRY_BOOTSTRAP);}};db.prototype._showPrivacyReminder=function(eb){"use strict";var fb=this,gb=this._privacyReminders[eb],hb=ya[eb],ib=null;if(this._newPrivacyWidgetInstance){ib=this._newPrivacyWidgetInstance.getSelectedBaseValue();}else ib=parseInt(ga.getValue(this._privacyWidgetElement),10);if(!gb||!gb.dialog||gb.shown){if(ib===ea.BaseValue.EVERYONE&&this._setEveryonePrivacyImpression){this._sendSetEveryonePrivacyImpression();this._setEveryonePrivacyImpression=false;}return;}if(hb.PRIVACY_CONSTANT.indexOf(ib)===-1)return;gb.dialog.setContext(this._privacyWidgetElement).show();gb.shown=true;this._privacyReminderShown=true;if(hb.LOG_IMPRESSION){var jb=(wa.getURIBuilder()).setString('type',hb.LOG_IMPRESSION).getURI();new i(jb).send();}if(hb.LOG_IMPRESSION_TO_DISMISS_ENDPOINT)if(eb==='delta_everyone'||eb==='only_me'){var kb=(va.getURIBuilder()).setString('type',eb).getURI();new i(kb).send();}else new i('/ajax/privacy/reminders/dismiss').setData({type:eb,dismiss_type:'impression'}).send();var lb=function(event){var mb=u.hasClass(event.target,'layerConfirm')||w.scry(event.target,'^.layerConfirm').length===1,nb=u.hasClass(event.target,'layerButton')||w.scry(event.target,'^.layerButton').length===1;if(mb&&eb!=='public_posting_filter_nux'){if(eb==='delta_everyone'||eb==='only_me'){var ob=(wa.getURIBuilder()).setString('type',fa.DELTA_EVERYONE_OK_BUTTON_CLICKED).getURI();new i(ob).send();}return;}if(eb==='delta_everyone'||eb==='only_me'){var pb=(va.getURIBuilder()).setString('type',eb).getURI();new i(pb).send();}else new i('/ajax/privacy/reminders/dismiss').setData({type:eb,hide:nb}).send();gb.events.forEach(function(rb){rb.remove();});gb.events=[];gb.dialog.hide();this._privacyReminderShown=false;if(nb){ua(function(){if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.openSelector();}else ga.toggle(w.scry(fb.getComponent('mainprivacywidget').element,'.uiSelector')[0]);}.bind(this));if(eb==='delta_everyone'){var qb=(wa.getURIBuilder()).setString('type',fa.DELTA_EVERYONE_CHANGE_BUTTON_CLICKED).getURI();new i(qb).send();}}}.bind(this);if(this._newPrivacyWidgetInstance){gb.conversionListener=this._newPrivacyWidgetInstance.subscribe('changed',function(mb,nb){var ob=this._newPrivacyWidgetInstance.getSelectedBaseValue();this._logPrivacyReminderConversion(gb,hb,ob);}.bind(this));}else gb.conversionListener=ga.subscribe('select',function(mb,nb){if(nb.selector==this._privacyWidgetElement.firstChild){var ob=parseInt(ga.getValue(nb.option),10);this._logPrivacyReminderConversion(gb,hb,ob);}}.bind(this));gb.events=[x.listen(gb.dialog.getContent(),'click',lb),x.listen(gb.dialog.getContext(),'click',lb)];};db.prototype._logPrivacyReminderConversion=function(eb,fb,gb){"use strict";if(fb.PRIVACY_CONSTANT.indexOf(gb)===-1){if(fb.LOG_CONVERSION){var hb=(wa.getURIBuilder()).setString('type',fb.LOG_CONVERSION).getURI();new i(hb).send();}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(eb.conversionListener);}else ga.unsubscribe(eb.conversionListener);eb.conversionListener=null;}};db.prototype._onSelectorChange=function(eb,fb){"use strict";if(!this.getComponent('mainprivacywidget'))return;if(this._newPrivacyWidgetInstance||(fb.selector===this._privacyWidgetElement.firstChild))setTimeout(function(){Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);}.bind(this));if(this._tagExpansionReminder)this._tagExpansionReminder.updateReminderText(fb.post_param);};db.prototype.cleanup=function(){"use strict";this._attachmentIsActive=false;if(this._focusListener){this._focusListener.remove();this._focusListener=null;}if(this._clickListener){this._clickListener.remove();this._clickListener=null;}Object.keys(ya).forEach(function(eb){var fb=this._privacyReminders[eb];if(fb&&fb.dialog&&fb.shown){fb.dialog.hide();fb.events.forEach(function(gb){gb.remove();});fb.events=[];if(fb.conversionListener)if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(fb.conversionListener);}else ga.unsubscribe(fb.conversionListener);fb.conversionListener=null;}}.bind(this));if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}if(this._modulesAreBootloaded){this._tagger.cleanup();this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;this._scraper.disable();}if(this._bootloadCallback){this._bootloadCallback.cancel();this._bootloadCallback=null;}if(this._dragEnterHandler){this._dragEnterHandler.unsubscribe();this._dragEnterHandler=null;}if(this._pagesComposerEntryLogger)this._pagesComposerEntryLogger.unregister();};db.prototype.reset=function(){"use strict";var eb=ca.byClass(this._root,"child_was_focused");if(eb)u.removeClass(eb,"child_was_focused");if(this._tagger)this._tagger.reset();if(this._scraper)this._scraper.reset();if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.informTagsChanged([]);this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(this._config.prefill_text)this._resetPrefill();};db.prototype.canSwitchAway=function(){"use strict";return !ca.byClass(this._root,'async_saving');};db.prototype.bootloadAttachments=function(){"use strict";if(this._bootloading)return;this._bootloading=true;q.getEndpoint(this._root,'/ajax/composerx/attachment/status/bootload/',true);};db.prototype.setBootloadedContent=function(eb){"use strict";this._bootloading=false;this._setEveryonePrivacyImpression=!!eb.set_everyone_privacy_impression;Object.keys(ya).forEach(function(ib){var jb=eb[ib+'_privacy_reminder'];if(jb)this._privacyReminders[ib]={dialog:jb};}.bind(this));if(eb.markup.privacy_widget){var fb=w.find(this._root,"._etn");v.setContent(fb,eb.markup.privacy_widget);var gb=w.find(this._root,"._1dwm");if(gb){gb.disabled=false;u.removeClass(gb,"_42fr");}}var hb=eb.placeholders.map(function(ib){return ib.component_name;});t.waitForComponents(this._composerID,hb,function(){var ib=w.find(this._root,"._3-6"),jb=w.find(this._root,"._3-7");v.setContent(ib,eb.markup.tagger_content);v.setContent(jb,eb.markup.tagger_icons);if(eb.markup.privacy_widget)this._initPrivacyWidgetInstance();q.addPlaceholders(this._root,this,eb.placeholders);this._tagger=eb.tagger;m.updateMessageBoxBarState(this);this._fullVersion=true;if(this._attachmentIsActive)this._fullInitWithComponents(eb);o.registerMentionsForComposerCancel(this.getComponent('maininput'),this.getComposerID());}.bind(this));};db.prototype._getScraperEndpoint=function(){"use strict";return ka('/ajax/composerx/attachment/link/scraper/');};db.prototype._isFocused=function(){"use strict";return w.contains(this._root,sa());};db.prototype._onFocus=function(){"use strict";s.logEntry(this._composerID);this._prefillOnFocus();h.inform(z.COMPOSER_FOCUSED);if(this._fullVersion||this._bootloading)return;h.inform('composer/focus',this._composerID);h.inform('composer/render_pab_nux');this.bootloadAttachments();};db.prototype.allowOGTagPreview=function(){"use strict";return true;};db.prototype._sendSetEveryonePrivacyImpression=function(){"use strict";new i('/ajax/privacy/reminders/set_everyone_privacy_impression').send();};db.prototype.onEmptyStatusCallback=function(){"use strict";var eb=this._getTextArea();y.set(eb);la.set({target:eb,message:ra._("Cette mise \u00e0 jour du statut semble \u00eatre vide. Veuillez \u00e9crire quelque chose ou joignez un lien ou une photo pour mettre \u00e0 jour votre statut."),position:'below',alignh:'left'});new ha().addSubscriptions(h.subscribe('composer/publish',function(event,fb){if(fb.composer_id!=this.getComposerID())return;la.clear(this._getTextArea());}.bind(this)));};db.setBootloadedContent=function(eb,fb){"use strict";var gb=za[eb];if(gb)gb.setBootloadedContent.call(gb,fb);};db.onEmptyStatusListener=function(eb){"use strict";var fb=za[eb];if(fb)fb.onEmptyStatusCallback.call(fb);};na(db.prototype,{_attachmentIsActive:false,_bootloading:false,_modulesAreBootloaded:false,_fullVersion:false,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_bootloadCallback:null,attachmentClassName:"_4j"});e.exports=db;},null);
__d("ComposerXMentionsInputReset",["DOMQuery","Input"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){var k=g.scry(j.element,'textarea.input')[0];j.instance.reset();h.reset(k);}e.exports=i;},null);
__d("ComposerXOGTaggerIconReset",["CSS","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){g.removeClass(j.element,"_4-jh");g.removeClass(j.element,"_509o");}e.exports=i;},null);
__d("ComposerXPrivacyWidgetReset",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){g.inform('Composer/changedtags',{withTags:[],mention:{},eventTag:false});}e.exports=h;},null);
__d("ComposerXTaggerIconReset",["CSS","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){g.removeClass(j.element,"_1dsa");g.removeClass(j.element,"_1dsb");g.removeClass(j.element,"_509o");}e.exports=i;},null);
__d("legacy:AudienceSelector",["AudienceSelector"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();b('AudienceSelector');},3);
__d("MetaComposerEdDialog",["ARIA","Animation","Arbiter","AsyncRequest","DOM","Ease","Parent","SelectorDeprecated","Vector","copyProperties","getElementText"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=null;function s(t){this._dialog=t.dialog;this.config=t;this._init();}s.init=function(t){if(r){r.config.show_audience=t.show_audience;t.dialog.destroy();return;}r=new s(t);};p(s.prototype,{_init:function(){i.subscribe('ComposerXStatusAttachment/ready',function(){if(this.config.show_audience){this._sendEducationRequest({},'/ajax/composer/audience/education',this._handlerCustomDuration.bind(this,6000));this.config.show_audience=false;}}.bind(this));if(this.config.show_sticky)i.subscribe('composer/mutate',function(t,u){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},'/ajax/composer/audience/sticky_education');}.bind(this));if(this.config.show_tags)i.subscribe('SelectedPrivacyOption/changed',function(t,u){this._sendEducationRequest({ids:u.tags,from:'WithTagger',hasEvent:u.hasEvent,type:u.privacy,tag_num:this.config.n_tag_shown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}.bind(this));n.subscribe('open',this._killAnim.bind(this));},_sendEducationRequest:function(t,u,v){if(!this._updateDialogContext())return;this._async&&this._async.abort();this._async=new j(u);this._async.setData(t).setHandler(v).send();},_updateDialogContext:function(){var t=k.scry(document.body,'div.composerAudienceWrapper'),u,v;for(var w=0;w<t.length;w++){u=t[w];v=o.getElementPosition(u);if(u&&v.x>0&&v.y>0){this._dialog.setContext(u);return true;}}return false;},_handler:function(t){this._handlerCustomDuration(1500,t);},_handlerCustomDuration:function(t,u){var v=u.payload;if(!v||!this._updateDialogContext())return;var w=this._dialog.getContent().firstChild;k.setContent(w,v);g.announce(q(w));this._dialog.show();var x=m.byClass(w,'metaComposerUserEd');if(this._anim){this._anim.stop();this._anim=new h(x);}else this._anim=new h(x).from('opacity',0);this._anim.to('opacity',1).ease(l.sineOut).checkpoint().duration(t).checkpoint().to('opacity',0).ease(l.sineOut).checkpoint().ondone(this._killAnim.bind(this)).go();},_killAnim:function(t,u){if(this._anim){this._dialog.hide();this._anim.stop();this._anim=null;}}});e.exports=s;},null);
__d("PrivacySelectorOptionNew",["CSS","DOM","DOMQuery","JSXDOM","MenuSelectableItem","PrivacyConst","csx","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(s){"use strict";k.call(this,s);this.updateAfterTagExpansion(s.hasTags);}r.prototype._getData=function(){"use strict";return this._data;};r.prototype.getTooltip=function(){"use strict";return this._getData().tooltip;};r.prototype.getPostParam=function(){"use strict";return this._getData().postParam;};r.prototype.getTriggerIcon=function(){"use strict";return this._getData().triggerIcon;};r.prototype.isPublic=function(){"use strict";return this.getPostParam()===l.PostParam.EVERYONE;};r.prototype.isFriends=function(){"use strict";return this.getPostParam()===l.PostParam.FRIENDS;};r.prototype.isOnlyMe=function(){"use strict";return this.getPostParam()===l.PostParam.ONLY_ME;};r.prototype.isBasicOption=function(){"use strict";return true;};r.prototype.isCustomOption=function(){"use strict";return false;};r.prototype.getTagExpansionBehavior=function(){"use strict";return this._getData().tagExpansionBehavior;};r.prototype.getBaseValue=function(){"use strict";return this._getData().baseValue;};r.prototype.getIndex=function(){"use strict";return this._getData().value;};r.prototype.getLoggingEventName=function(){"use strict";switch(this.getPostParam()){case l.PostParam.FRIENDS:return 'click_friends';case l.PostParam.EVERYONE:return 'click_everyone';case l.PostParam.ONLY_ME:return 'click_only_me';case l.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case l.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};r.prototype.updateAfterTagExpansion=function(s){"use strict";var t=this._getData().baseLabel;if(s&&this._getData().showPlusOnTagExpansion)t=o._("{privacyLabel} (+)",[o.param("privacyLabel",this._getData().baseLabel)]);this._setLabel(t);if(s){this._setSubtitle(this._getData().optionSubtitleWithTags);}else this._setSubtitle(this._getData().optionSubtitle);};r.prototype.isBelowFold=function(){"use strict";var s=g.hasClass(this.getRoot(),"_3ey_");return s;};r.prototype._setLabel=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._54nh");t&&h.setContent(t,s);this._getData().label=s;};r.prototype._setSubtitle=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._48u1");t&&h.setContent(t,s);};r.prototype.render=function(){"use strict";var s=q.render.call(this);if(!this._getData().isPrimaryOption)return s;var t=i.find(s,"._54nc");t&&g.addClass(t,"_48t_");var u=h.find(s,"._54nh");u&&g.addClass(u,"_48u0");var v=j.div({className:"_48u1"},this._getData().optionSubtitle);h.appendContent(t,v);return s;};e.exports=r;},null);
__d("XPrivacySelectorLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d("PrivacySelectorCustomOption",["AsyncDialog","AsyncRequest","DataStore","PrivacySelectorOptionNew","XPrivacySelectorLoggingController","XPrivacyCustomDialogController"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in j)if(j.hasOwnProperty(m))o[m]=j[m];var n=j===null?null:j.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=j;function o(p){"use strict";j.call(this,p);}o.prototype.isBasicOption=function(){"use strict";return false;};o.prototype.isCustomOption=function(){"use strict";return true;};o.prototype.getSelector=function(){"use strict";return this._selector;};o.prototype.setPostParam=function(p){"use strict";this._data.postParam=p;};o.prototype.getLoggingEventName=function(){"use strict";return 'click_custom';};o.prototype.openDialog=function(p){"use strict";if(typeof this._selector==='undefined')this._selector=p;i.set(this._data.id,'PrivacySelectorCustomOption',this);var q=l.getURIBuilder().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',p.getPostParam()).setString('content_type',p.getContentType()).setInt('render_location',p.getRenderLocation()).setIntVector('tags',p.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',p.getTagExpansionButton()).getURI(),r=new h(q);r.setRelativeTo(p.getTriggerButtonElement());g.send(r,function(s){var t=function(u){var v=k.getURIBuilder().setEnum('event',u).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new h().setURI(v).send();};s.subscribe('hide',function(){p.inform('custom/hide');p.inform('selectorFinished');});s.subscribe('success',function(){p.inform('custom/success');t('custom_save');});s.subscribe('cancel',function(){p.inform('custom/cancel');t('custom_cancel');});});};o.customPrivacySave=function(p,q,r){"use strict";var s=i.get(p,'PrivacySelectorCustomOption');s.getSelector().updateDataForItemIndex(s.getIndex(),q,r);s.getSelector().setValue(s.getIndex());i.remove(p,'PrivacySelectorCustomOption');};e.exports=o;},null);
__d("PrivacySelectableMenu",["AsyncRequest","CSS","Ease","PrivacySelectorCustomOption","PrivacySelectorOptionNew","SelectableMenu","SelectableMenuUtils","XPrivacySelectorLoggingController","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();for(var p in l)if(l.hasOwnProperty(p))r[p]=l[p];var q=l===null?null:l.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=l;function r(s,t){"use strict";l.call(this,s,t);}r.prototype.getItemForIndex=function(s){"use strict";for(var t=0;t<this._items.length;t++){var u=this._items[t];if(u instanceof k&&u.getIndex()==s)return u;}return null;};r.prototype.selectDefaultOption=function(){"use strict";this._items.some(function(s){if(s instanceof k&&this._isDefaultOption(s)){this.setValue(s.getIndex());return true;}return false;},this);};r.prototype.selectOption=function(s){"use strict";var t=null,u=this._items.some(function(v){if(v instanceof k&&!v.isCustomOption()&&v.getPostParam()==s){this.setValue(v.getIndex());return true;}if(v instanceof j){t=v;return false;}if(this._isMoreOption(v)){this.expandMenu();return false;}},this);if(!u&&t){t.setPostParam(s);this.setValue(t.getIndex());}};r.prototype._isDefaultOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_plx");};r.prototype._isMoreOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_po2");};r.prototype._handleItemClick=function(s,t){"use strict";if(!m.doesItemSupportSelect(s))return q._handleItemClick.call(this,s,t);if(this._isMoreOption(s)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(s);var u=this.inform('itemclick',{item:s,event:t});if(u)return;if(!m.isSelected(s)&&!s.isCustomOption()&&s.select()!==false){this._items.forEach(function(v){if(m.isSelected(v)&&v!==s)v.deselect();});this.inform('change',this.getSelection());}this.done();return s.handleClick();};r.prototype._logMoreClick=function(){"use strict";var s=n.getURIBuilder().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(s).send();};r.prototype._logOptionClick=function(s){"use strict";var t=n.getURIBuilder().setEnum('event',s.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(t).send();};r.prototype.expandMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po3");h.addClass(this.getRoot(),"_po4");this.inform('expandMenu');};r.prototype.collapseMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po4");h.addClass(this.getRoot(),"_po3");};r.prototype.updateOptionsAfterTagExpansion=function(s){"use strict";this.forEachItem(function(t){if(t instanceof k)t.updateAfterTagExpansion(s);});};r.prototype.onPopoverOpen=function(s){"use strict";if(this._config.learnMore)this._config.learnMore.collapse();if(s&&s.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(s&&this._items.indexOf(s)>=15)setTimeout(function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:i.sineOut});}.bind(this),250);};e.exports=r;},null);
__d("MenuStaticItem",["DOM","MenuItemBase","React","copyProperties","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(p){"use strict";h.call(this);this._data=p;}o.prototype._renderItemContent=function(){"use strict";var p=g.create('span',{className:"_54nc _54ah"});if(this._data.children){i.render(i.createElement("span",{className:"_54nh"},this._data.children),p);}else g.setContent(p,g.create('span',{className:"_54nh"},this._data.markup));return p;};j(o.prototype,{handleClick:l});e.exports=o;},null);
__d("PopoverButton",["DOM","DOMQuery","csx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={setLabel:function(k,l){var m=h.find(k,"._55pe"),n=m.childNodes;for(var o=0;o<n.length;o++)if(h.isTextNode(n[o])){g.replace(n[o],l);return;}g.appendContent(m,l);}};e.exports=j;},null);
__d("PrivacySelectorDataStore",["ArbiterMixin","merge","PrivacySelectorNewDispatcher","KeyedCallbackManager"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=new j(),l=h(g,{get:function(m,n){k.executeOrEnqueue(m,n);},hasValueChanged:function(m){return !!k.getResource(m);}});i.register(function(m){if(m.selector_type){var n={};n[m.selector_type]={post_param:m.post_param,unique_id:m.unique_id};k.addResourcesAndExecute(n);l.inform('change');}});e.exports=l;},null);
__d("XPrivacySelectorTransitionDefaultController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/transition_default\/",{post_param:{type:"String"},render_location:{type:"Enum",enumType:0}});},null);
__d("XPrivacySelectorUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},tag_expansion_button:{type:"String"},reload_selector:{type:"Bool",defaultValue:false}});},null);
__d("PrivacySelectorBase",["ArbiterMixin","AsyncRequest","Button","CSS","CurrentUser","Input","MenuStaticItem","MenuSelectableItem","PopoverButton","PopoverLoadingMenu","PrivacyConst","DataStore","PrivacySelectorNewDispatcher","PrivacySelectorDataStore","PrivacySelectableMenu","TagExpansionButtonConfig","Tooltip","XPrivacySelectorLoggingController","XPrivacySelectorTransitionDefaultController","XPrivacySelectorUpdateController","bind","cx","fbt","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();var ea=3,fa=da(g);for(var ga in fa)if(fa.hasOwnProperty(ga))ia[ga]=fa[ga];var ha=fa===null?null:fa.prototype;ia.prototype=Object.create(ha);ia.prototype.constructor=ia;ia.__superConstructor__=fa;function ia(ja,ka,la,ma,na,oa){"use strict";r.set(ja,'selector',this);this._root=ja;this._button=ka;this._config=oa;this._menu=la;this._popoverMenu=na;this._input=ma;this._isSavedOnSelect=oa.is_saved_on_select;this._privacyFBID=oa.privacy_fbid;this._contentType=oa.content_type;this._renderLocation=oa.render_location;this._supportsTagExpansion=oa.supports_tag_expansion;this._prefixTooltipApps=oa.should_prefix_tooltip_apps;this._shouldDisplayLabel=oa.should_display_label;this._tags=oa.tagged_uids;this._hasTags=this._tags.length>0;this._entID=oa.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();this._selectorSyncKey=oa.selector_sync_key;if(oa.use_async_menu){this._popoverMenu.subscribe('setMenu',function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof u))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}.bind(this));}else this._onMenuLoad();if(this._selectorSyncKey)this._initSelectorSync();}ia.prototype._initSelectorSync=function(){"use strict";t.subscribe('change',function(){t.get(this._selectorSyncKey,function(ja){if(ja.unique_id!==this._menu._config.id){this._receivingUpdate=true;this.selectOption(ja.post_param);this.isComposerWithDefault()&&this.reloadSelector();}}.bind(this));}.bind(this));if(!this._syncsToDefault())this._menu.subscribe('change',function(){this._broadcastUpdate();}.bind(this));};ia.prototype._broadcastUpdate=function(){"use strict";if(!this._receivingUpdate){var ja=this._getSelectedOption();s.handleUpdateFromSelector({selector_type:this._selectorSyncKey,post_param:ja.getPostParam().toString(),unique_id:this._menu._config.id});}else this._receivingUpdate=false;};ia.prototype.isComposerWithDefault=function(){"use strict";return this._syncsToDefault()&&!this._config.replace_on_select;};ia.prototype._isSelectorForChangingComposerDefault=function(){"use strict";return this._syncsToDefault&&this._config.replace_on_select;};ia.prototype._syncsToDefault=function(){"use strict";return this._config.selector_sync_key==q.PrivacyField.DEFAULT_COMPOSER.toString();};ia.prototype.getIsPublicSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isPublic();};ia.prototype.getIsFriendsSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isFriends();};ia.prototype.getIsOnlyMeSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isOnlyMe();};ia.prototype.getSelectedBaseValue=function(){"use strict";return this._selectedOption&&this._selectedOption.getBaseValue();};ia.prototype.getSelectedPostParam=function(){"use strict";return this._selectedOption&&this._selectedOption.getPostParam().toString();};ia.prototype.setValue=function(ja){"use strict";this._menu.setValue(ja);};ia.prototype.openSelectorExpanded=function(ja){"use strict";this.openSelector(function(){this._menu.expandMenu();ja&&ja();}.bind(this));};ia.prototype.openSelector=function(ja){"use strict";if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',function(){ja&&ja();}.bind(this));this._popover.showLayer();}else{this._popover.showLayer();ja&&ja();}};ia.prototype.closeSelector=function(){"use strict";this._popover.hideLayer();};ia.prototype.getPopover=function(){"use strict";return this._popover;};ia.prototype.getTriggerButtonElement=function(){"use strict";return this._button;};ia.prototype.getRoot=function(){"use strict";return this._root;};ia.prototype.getMenuElement=function(){"use strict";return this._menu.getRoot();};ia.prototype.selectDefaultOption=function(){"use strict";this._menu.selectDefaultOption();this._updateMenu();};ia.prototype.selectOption=function(ja){"use strict";if(!ja)return;if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,ja));this._fetchAsyncMenu();}else this._selectOptionImpl(ja);};ia.prototype._selectOptionImpl=function(ja){"use strict";this._menu.selectOption(ja);this._updateMenu();};ia.prototype._updateMenu=function(){"use strict";this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};ia.prototype.setTagExpansionButton=function(ja){"use strict";this._tagExpansionButton=ja;if(this._hasTags){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};ia.prototype.getTagExpansionButton=function(){"use strict";return this._tagExpansionButton;};ia.prototype._initTagExpansionButtonState=function(){"use strict";this._tagExpansionButton=v.FRIENDS_OF_TAGGED;var ja=this._getSelectedOption();if(!ja)return;var ka=JSON.parse(ja.getPostParam());if(ka.settings&&ka.settings.no_tag_expansion===true){this._tagExpansionButton=v.TAGGED_ONLY;}else this._tagExpansionButton=v.FRIENDS_OF_TAGGED;};ia.prototype._fetchAsyncMenu=function(){"use strict";if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};ia.prototype._getSelectedOption=function(){"use strict";if(!(this._menu instanceof u))return;var ja;this._menu.forEachItem(function(ka){if(ka instanceof n&&ka.isSelected())ja=ka;}.bind(this));return ja;};ia.prototype._onItemClick=function(ja,ka){"use strict";var la=ka.item;if(la instanceof m)return;if(la.isBasicOption()){this.updateDataForItemIndex(la.getIndex(),la.getPostParam().toString());}else if(la.isCustomOption()){this._closeForCustom=true;la.openDialog(this);}this.inform('click',{customSelected:la.isCustomOption()});};ia.prototype.getContentType=function(){"use strict";return this._contentType;};ia.prototype.getRenderLocation=function(){"use strict";return this._renderLocation;};ia.prototype.getPostParam=function(){"use strict";return this._postParam;};ia.prototype.getTags=function(){"use strict";return this._tags;};ia.prototype.updateDataForItemIndex=function(ja,ka,la){"use strict";if(la){this._tagExpansionButton=la;this.inform('CustomTagExpansion',this._tagExpansionButton);}var ma=this._menu.getItemForIndex(ja);if(ma.isCustomOption())ma.setPostParam(ka);this._selectedOption=ma;this._postParam=ka;l.setValue(this._input,ka);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips()){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};ia.prototype._shouldUpdateTooltips=function(){"use strict";return this._prefixTooltipApps||this._supportsTagExpansion;};ia.prototype._savePrivacy=function(){"use strict";this._sendUpdateRequest();};ia.prototype.reloadSelector=function(){"use strict";var ja=z.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setString('ent_id',String(this._entID)).getURI();new h().setRelativeTo(this._root).setHandler(this.inform.bind(this,'reloaded')).setURI(ja).send();};ia.prototype.transitionToDefault=function(){"use strict";var ja=y.getURIBuilder().setString('post_param',this._postParam).setEnum('render_location',this._renderLocation).getURI();new h().setRelativeTo(this._root).setHandler(function(){this._config.selector_sync_key=q.PrivacyField.DEFAULT_COMPOSER.toString();this._initSelectorSync();this.inform.bind(this,'reloaded');}.bind(this)).setURI(ja).send();};ia.prototype._sendUpdateRequest=function(){"use strict";var ja=z.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setIntVector('tags',this._tags).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',this._isSavedOnSelect).setBool('should_return_tooltip',this._shouldUpdateTooltips()).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setString('ent_id',String(this._entID)).setString('tag_expansion_button',this._tagExpansionButton).getURI();new h().setRelativeTo(this._button).setHandler(aa(this,function(ka){if(this._isSelectorForChangingComposerDefault())this._broadcastUpdate();var la=ka&&ka.payload&&ka.payload.tooltip;la&&this._setTooltipValue(ka.payload.tooltip);this.inform('selector_updated');})).setURI(ja).send();};ia.prototype.informTagsChanged=function(ja){"use strict";var ka=this._getTags(ja);this.informTagsChangedWithIDs(ka);};ia.prototype.informTagsChangedWithIDs=function(ja){"use strict";var ka=!ja.length;if(this._hasTags===ka){this._hasTags=!!ja.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();}if(this._tags.length!==ja.length){this._tags=ja;this._updateTooltipAfterChange();}};ia.prototype._showTagExpansion=function(){"use strict";return this._hasTags&&(this._tagExpansionButton.valueOf()===v.FRIENDS_OF_TAGGED.valueOf());};ia.prototype._getTags=function(ja){"use strict";var ka=[],la=k.getID();if(ja.withTags)for(var ma=0;ma<ja.withTags.length;ma++){var na=ja.withTags[ma].info;if(na.uid!=la)ka.push(na.uid);}if(ja.mention)for(var oa in ja.mention)if(ja.mention[oa].type=='user'&&ja.mention[oa].uid!=la)ka.push(ja.mention[oa].uid);return ka;};ia.prototype._updateTriggerButtonLabel=function(){"use strict";var ja=this._selectedOption.getTriggerIcon();i.setIcon(this._button,ja.cloneNode());if(!this._shouldDisplayLabel)return;o.setLabel(this._button,this._selectedOption.getLabel());if(this._config.trigger_style===ea){j.conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());j.conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}};ia.prototype._updateTooltipAfterChange=function(){"use strict";var ja=ca._("Chargement...");this._setTooltipValue(ja);this._sendUpdateRequest();};ia.prototype._setTooltipValue=function(ja){"use strict";ja&&w.set(this._button,ja);};ia.prototype._onPopoverClose=function(){"use strict";if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};ia.prototype._onPopoverOpen=function(){"use strict";if(!(this._menu instanceof u))return;this._menu.onPopoverOpen(this._getSelectedOption());var ja=x.getURIBuilder().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new h().setURI(ja).send();this.inform('open');};ia.prototype._onMenuLoad=function(){"use strict";this._menu.subscribe('itemclick',this._onItemClick.bind(this));this._popover.subscribe('hide',this._onPopoverClose.bind(this));this._popover.subscribe('show',this._onPopoverOpen.bind(this));this._menu.subscribe('expandMenu',function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}.bind(this));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._hasTags&&this._updateTriggerButtonLabel();}};e.exports=ia;},null);
__d("XFamilyMentionsNUXDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/family_mentions\/nux_dialog\/",{__asyncDialog:{type:"Int"}});},null);
__d("FamilyRelationshipMentions",["AsyncDialog","AsyncRequest","FamilyMentionsData","XFamilyMentionsNUXDialogController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=(function(){var l={},m=false;l.shouldShowNUX=function(n){if(i.hasAcceptedNUX||m)return false;var o=n.family_names;if(o==(void 0))return false;for(var p=0;p<o.length;p++)if(o[p]==n.text)return true;return false;};l.showNUX=function(n,o){var p=j.getURIBuilder().getURI();g.send(new h(p),function(q){q.subscribe('cancel',function(){n.text=n.default_name;o(n);});q.subscribe('confirm',function(){m=true;new h().setURI('/ajax/family_mentions/confirm_nux').send();o(n);q.finishHide();});});};return l;})();e.exports=k;},null);
__d("MentionsTypeaheadAreaView",["ContextualTypeaheadView","FamilyRelationshipMentions","Parent"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(){"use strict";if(g!==null)g.apply(this,arguments);}l.prototype.getContext=function(){"use strict";return i.byClass(this.element,'uiMentionsInput');};l.prototype.shouldValidateTypeaheadSelection=function(m){"use strict";return h.shouldShowNUX(m);};l.prototype.validateTypeaheadSelection=function(m,n){"use strict";h.showNUX(m,n);};e.exports=l;},null);