/*!CK:2140417794!*//*1428314132,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["GTb5l"]); }

__d("PhotosUploadWaterfallErrorCodes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SECURITY:1,FILE_IO:2,IMAGE_IO:3,UPLOAD_IO:4,INVALID_SERVER_RESULT:5,RESIZE_FAILURE:6,ENCODE_FAILURE:7,INVALID_DOMAIN:8,BAD_JPEG_MARKERS:9,BAD_SERVER_RESPONSE:10,EXTERNAL_INTERFACE_UNAVAILABLE:11,JS_CALL_FAILED:12,UNCAUGHT_ERROR:13,UPLOAD_SWF_FAILED_LOAD:14,FILE_IO_TIMEOUT:15,IMAGE_SECURITY:16,BAD_IMAGE_FILE:17,IMAGE_IO_TIMEOUT:18,BLACK_PHOTO:19,EMPTY_FILE_LOADED:20,FILE_READ_DISABLED:21,BAD_NETWORK:22,FLASH_LOAD_TIMEOUT:23,FLASH_LOAD_FAILURE:24,FLASH_UPGRADE_REQUIRED:25};},null);
__d("PUWApplications",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={WEB_SIMPLE:"web_simple",WEB_FLASH:"web_flash",WEB_HTML5:"web_html5",WEB_COMPOSER:"web_composer",WEB_ARCHIVE:"web_archive",WEB_MESSENGER:"web_messenger",WEB_OMNIPICKER:"web_omnipicker",WEB_MUSE_OMNIPICKER:"web_muse_omnipicker",WEB_SAY_THANKS:"web_say_thanks",WEB_GOODWILL_CAMPAIGN_OMNIPICKER:"web_goodwill_campaign_omnipicker",WEB_M_ZERO:"web_m_zero",WEB_M_BASIC:"web_m_basic",WEB_M_TOUCH:"web_m_touch",MOBILE_FB4IOS:"mobile_fb4ios",MOBILE_FB4IOS_SNAP:"mobile_fb4ios_snap",MOBILE_FB4A:"mobile_fb4a",MOBILE_PMA_ANDROID:"mobile_pma_android",MOBILE_PMA_IOS:"mobile_pma_ios",THIRD_PARTY:"third_party"};},null);
__d("PUWSteps",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};},null);
__d("ImageResizer",["ArbiterMixin","BlobFactory","DOM","UserAgent_DEPRECATED","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=function(m,n,o,p,q){this._input=m;this._image=null;this._canvas=null;this._rotation=0;this._maxWidth=n;this._maxHeight=o;this._outputMime=p||'image/jpeg';this._outputQuality=(q===(void 0))?.87:q;};l.isSupported=function(){if(window.File&&window.FileReader){var m=i.create('canvas');if(m.toBlob||(m.toDataURL&&window.ArrayBuffer&&window.Uint8Array&&h.isSupported()))return true;}return false;};k(l.prototype,g);k(l.prototype,{setOrientation:function(m){this._rotation={1:0,3:180,6:90,8:270}[m]||0;},resize:function(){if(this._input instanceof HTMLCanvasElement||this._input instanceof HTMLImageElement){this._image=this._input;this._handleImage();}else if(typeof this._input=="string"){this._loadImage(this._input);}else if(this._input instanceof window.File)this._loadFile(this._input);},_rotatedToSide:function(){return (this._rotation%180)==90;},_prepareError:function(m){return (function(){this.inform.bind(this,"error",m);}.bind(this));},_loadFile:function(m){this._fileLoadTime=Date.now();var n=new FileReader();n.onload=this._handleFile.bind(this);n.onerror=this._prepareError("Could not read tile.");n.readAsDataURL(m);},_handleFile:function(event){this._fileLoadTime=Date.now()-this._fileLoadTime;var m=event.target.result;this._loadImage(m);},_loadImage:function(m){this._imageLoadTime=Date.now();this._image=i.create('img');this._image.onload=this._handleImage.bind(this);this._image.onerror=this._prepareError("Could not load image.");this._image.src=m;},_handleImage:function(){if(this._imageLoadTime)this._imageLoadTime=Date.now()-this._imageLoadTime;if(this._input instanceof window.File){var m=this._calculateRatio();if(m>=1){this._skippedResizing=true;return this._handleBlob(this._input);}}this._skippedResizing=false;this._drawTransformed();this._extractBlob();},_drawTransformed:function(){var m=Date.now(),n=this._calculateRatio(),o=0;if(j.chrome())if(n<.25){o=2;}else if(n<.5)o=1;var p=this._drawResizedCanvas(this._image,n*Math.pow(2,o));for(var q=0;q<o;q++)p=this._drawResizedCanvas(p,.5);if(this._rotation)p=this._drawRotatedCanvas(p);this._canvas=p;this._drawTime=Date.now()-m;},_drawResizedCanvas:function(m,n){var o=i.create('canvas');o.width=m.width*n;o.height=m.height*n;var p=o.getContext("2d");p.scale(n,n);p.drawImage(m,0,0);return o;},_drawRotatedCanvas:function(m){var n=i.create('canvas');if(this._rotatedToSide()){n.width=m.height;n.height=m.width;}else{n.width=m.width;n.height=m.height;}var o=n.getContext("2d");o.translate(n.width*.5,n.height*.5);o.rotate(Math.PI*(this._rotation/180));o.translate(m.width*-.5,m.height*-.5);o.drawImage(m,0,0,m.width,m.height);return n;},_calculateRatio:function(){var m=1,n=this._rotatedToSide()?this._maxHeight:this._maxWidth,o=this._rotatedToSide()?this._maxWidth:this._maxHeight,p=n/this._image.width,q=o/this._image.height;if(p<m&&p>0)m=p;if(q<m&&q>0)m=q;return m;},_extractBlob:function(){this._extractionStart=Date.now();if(this._canvas.toBlob){this._canvas.toBlob(this._handleBlob.bind(this),this._outputMime,this._outputQuality);return;}var m=this._canvas.toDataURL(this._outputMime,this._outputQuality),n=m.match(/^data:(.*?);base64,/);if(!n){this._prepareError("Couldn't get base64 encoded data from canvas.")();return;}var o=n[1],p=m.substr(n[0].length),q=window.atob(p),r=new ArrayBuffer(q.length),s=new Uint8Array(r);for(var t=0;t<q.length;t++)s[t]=q.charCodeAt(t);var u=h.getBlob([r],{type:o});this._handleBlob(u);},_handleBlob:function(m){this._canvas=this._canvas||i.create('canvas');m.performanceData={blockingDraw:+true,blockingExtraction:+!this._canvas.toBlob,imageLoadTime:this._imageLoadTime,fileLoadTime:this._fileLoadTime,skippedResizing:+this._skippedResizing};if(!this._skippedResizing)k(m.performanceData,{extractionTime:Date.now()-this._extractionStart,drawTime:this._drawTime});this.inform('resized',m);}});e.exports=l;},null);
__d("fileSliceName",["UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='slice',i;if(i=g.chrome()){if(i<21)h='webkitSlice';}else if(i=g.firefox()){if(i<13)h='mozSlice';}else if(!(i=g.safari()))if(g.webkit())h='webkitSlice';e.exports=h;},null);
__d("fileSlice",["fileSliceName"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=a.File&&a.File.prototype[g];e.exports=h;},null);
__d("VideoUploadFeatureDetector",["UserAgent_DEPRECATED","fileSlice"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={supportsChunking:function(){return (typeof h==='function')&&this.supportsXHR();},supportsFullProgress:function(){return !g.firefox();},supportsFileAPI:function(){return ('FileList' in window);},supportsFileReading:function(){return ('FileReader' in window&&'DataView' in window);},supportsXHR:function(){return ('FormData' in window);}};e.exports=i;},null);
__d("VideoUploadFile",["fileSlice","VideoUploadFeatureDetector"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this.$VideoUploadFile0=j;this.$VideoUploadFile1=i.getExtensionFromFileInput(j);if(h.supportsFileAPI()&&j.files.length){this.$VideoUploadFile2=j.files[0];this.$VideoUploadFile3=this.$VideoUploadFile2.size;}else{this.$VideoUploadFile2=null;this.$VideoUploadFile3=null;}}i.prototype.getFileInput=function(){"use strict";return this.$VideoUploadFile0;};i.prototype.getFile=function(){"use strict";return this.$VideoUploadFile2;};i.prototype.getSize=function(){"use strict";return this.$VideoUploadFile3;};i.prototype.getExtension=function(){"use strict";return this.$VideoUploadFile1;};i.prototype.getChunk=function(j,k){"use strict";return this.$VideoUploadFile2?g.call(this.$VideoUploadFile2,j,k):null;};i.getExtensionFromFileInput=function(j){"use strict";return j.value.indexOf('.')!=-1?j.value.split('.').pop().toLowerCase():'';};e.exports=i;},null);
__d("ComposerXMediaUploadHandler",["Arbiter","AsyncRequest","ComposerXAjaxEndpoint","ComposerXController","CSS","Dialog","SubscriptionsHandler","URI","VideoUploadConfig","VideoUploadFile","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=i.MEDIA_UPLOAD,s='/ajax/composerx/attachment/video/upload/',t=0;function u(v,w){"use strict";this.$ComposerXMediaUploadHandler0=v;this.$ComposerXMediaUploadHandler1=w;}u.prototype.fetchAttachments=function(){"use strict";[this.getPhotoUploadAttachmentEndpoint(),s].forEach(function(v){j.fetchAttachmentData(this.$ComposerXMediaUploadHandler0,v);}.bind(this));};u.prototype.handleFileSelected=function(v){"use strict";if(u.isVideoFile(v)){this.handleVideoSelected(v);}else this.handlePhotoSelected(v);};u.prototype.handleVideoSelected=function(v){"use strict";if(this.$ComposerXMediaUploadHandler1&&this.$ComposerXMediaUploadHandler1.imagesOnly){var w=new l().setModal(true).setButtons([l.OK]);if(this.$ComposerXMediaUploadHandler1.isEditComposer){w.setTitle(q._("Can't add video")).setBody(q._("Sorry, you can't add a video to a post you're editing."));}else w.setTitle(q._("Type d\u2019image non valide")).setBody(q._("Veuillez choisir un fichier image valide."));w.show();return;}j.getAttachment(this.$ComposerXMediaUploadHandler0,s);g.inform('ComposerXFilesStore/filesAdded/'+this.$ComposerXMediaUploadHandler0+'/videoupload',{fileInput:v},g.BEHAVIOR_PERSISTENT);};u.prototype.handlePhotoSelected=function(v){"use strict";j.getAttachment(this.$ComposerXMediaUploadHandler0,this.getPhotoUploadAttachmentEndpoint());u.$ComposerXMediaUploadHandler2(this.$ComposerXMediaUploadHandler0,v);};u.isVideoFile=function(v){"use strict";var w=p.getExtensionFromFileInput(v.getInput());return !!o.videoExtensions[w];};u.prototype.$ComposerXMediaUploadHandler3=function(){"use strict";return (this.$ComposerXMediaUploadHandler1)?this.$ComposerXMediaUploadHandler1.photoUploadOverrideEndpoint:null;};u.prototype.getPhotoUploadAttachmentEndpoint=function(){"use strict";var v=this.$ComposerXMediaUploadHandler3();return (v)?v:r;};u.$ComposerXMediaUploadHandler2=function(v,w){"use strict";g.inform('ComposerXFilesStore/filesAdded/'+v+'/mediaupload',{fileInput:w},g.BEHAVIOR_PERSISTENT);};u.setupFileUploadToComposerDialog=function(v,w,x){"use strict";var y='composerxmediauploadhandler'+t++,z=function(ca){k.conditionClass(v.getControl(),x,ca);v.getInput().disabled=ca;},aa=new n(w),ba=aa.getQueryData();ba.client_ref=y;aa.setQueryData(ba);w=aa.toString();v.subscribe('change',function(){new h().setURI(w).setErrorHandler(function(){v.clear();z(false);}).send();z(true);});g.subscribe('composer/dialog/'+y+'/new',function(ca,da){this.$ComposerXMediaUploadHandler2(da.composerID,v);var ea=new m();ea.addSubscriptions(g.subscribe('composer/publish',function(event,fa){if(da.composerID===fa.composer_id)a.location.reload();}),da.dialog.subscribe('hide',function(){ea.release();v.clear();z(false);}));}.bind(this));};e.exports=u;},null);
__d("ComposerXMediaPostTab",["Arbiter","AudienceAlignment","ComposerXMarauderLogger","ComposerXMediaUploadHandler","Event"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";h.abort();g.inform('composer/reset_pab_nux');i.logEntry(m);var o=new j(m);k.listen(n.getContainer(),'click',function(){o.fetchAttachments();n.getInput().disabled=false;});n.subscribe('change',function(){o.handleFileSelected(n);});}e.exports=l;},null);
__d("PhotosUploadWaterfallXMixin",["AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","PUWApplications","copyProperties","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(p,q){var r={};p.client_time=Math.round(Date.now()/1000);if(i.retryBanzai){r.retry=true;p.nonce=m(4294967296);}h.post(i.banzaiRoute,p,r);if(q)setTimeout(q,0);}function o(p,q){if(i.useBanzai){n(p,q);}else{var r=new g(i.loggingEndpoint,{data:JSON.stringify(p)}).setHandler(q);if(i.timeout)r.setTimeout(10*1000);r.send();}}e.exports={logStep:function(p,q,r){var s=this.getWaterfallID&&this.getWaterfallID(),t=this.getWaterfallAppName&&this.getWaterfallAppName();if(!s||!t)return;if(i.reduceLoggingRequests&&t===j.WEB_FLASH){r&&r();return;}o(k({step:p,qn:s,uploader:t,ref:this.getWaterfallSource&&this.getWaterfallSource()},q),r);}};},null);
__d("EntstreamStoryDeduper",["AsyncRequest","Arbiter","DOM","csx","CSS","CacheStorage"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(p,q){var r={};for(var s=0;s<p.length;s++){var t=p[s],u=t.getAttribute('data-dedupekey');if(r[u]){if(q){k.hide(t);h.inform('FbFeedUnreadPillNavigation/logDedupe',{story:t,action:'dedupe_story_hide'});}else{i.remove(t);h.inform('FbFeedUnreadPillNavigation/logDedupe',{story:t,action:'dedupe_story_remove'});}}else r[u]=1;}}function n(p,q){var r={},s=0,t=Date.now()/1000/3600,u=30;for(var v=0;v<u;++v){var w=new l('localstorage','vpv_local_log.'+parseInt(t-v,10)+'h'),x=w.keys();s+=x.length>0;for(var y=0;y<x.length;y++)r[x[y]]=1;}var z=0,aa=0,ba;for(var ca=0;ca<p.length;ca++){var da=p[ca],ea=da.getAttribute('data-dedupekey'),fa='checkedVPVLocalCache';if(k.hasClass(da,fa)){continue;}else k.addClass(da,fa);++z;if(r[ea]&&k.shown(da)){ba=ea;++aa;if(q){k.hide(da);}else i.remove(da);}}if(z>0)new g('/ajax/feed/feed_tracking/vpv_local_storage_log').setData({num_vpvs:Object.keys(r).length,num_hours:s,num_seen_stories:aa,num_unseen_stories:z,seen_story_key:ba}).send();}var o={dedupe:function(p,q){q=q||"._5jmm";var r=i.scry(p,q);r=r.filter(function(s){return s.getAttribute('data-dedupekey');});m(r,false);},dedupeHide:function(p,q,r){q=q||"._5jmm";var s=i.scry(p,q),t=s.filter(function(x){return x.getAttribute('data-dedupekey')&&k.shown(x);});m(t,true);if(r){var u=i.scry(p,".unread_session");for(var v=0;v<u.length;++v){var w=i.scry(u[v],q);w.length&&n(w,true);}}}};e.exports=o;},null);
__d("PageAdsAttachmentLinkShareConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={LINK_ATTACHMENT_CLICK:'link_attachment_click'};e.exports=g;},null);
__d("runAfterScrollingStops",["Arbiter","Event","Run","debounceAcrossTransitions","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(w,x,y){if(x&&o[x])return;if(!n){g.subscribe('page_transition',v);n=true;}if(!m){w();return;}x&&(o[x]=1);p.push(w);if(!y){if(r){i.onLeave(v);r=false;}q.push(p.length-1);}}var m,n,o={},p=[],q=[],r=true,s=500,t=j(function(){m=false;var w=p;p=[];q=[];o={};for(var x=0,y=w.length;x<y;++x)w[x]();},s);function u(){m=true;t();}function v(){var w=q;q=[];r=true;for(var x=0,y=w.length;x<y;++x)p[w[x]]=k;}h.listen(window,'scroll',u);e.exports=l;},null);
__d("LitestandOffscreenController",["Arbiter","CSS","DOM","Event","NavigationMessage","Run","Style","SubscriptionsHandler","Vector","cx","csx","queryThenMutateDOM","runAfterScrollingStops","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=1,v=9,w=10,x={},y=false,z,aa,ba,ca,da=[];function ea(){z&&z.release();z=null;y=false;}function fa(){x={};da=[];}function ga(){if(h.hasClass(document.body,"_5vb_"))return w;return v;}function ha(){ca=ca||o.getViewportDimensions().y;aa=o.getScrollPosition().y;ba=aa+ca;if(u){aa-=ca*u;ba+=ca*u;}for(var qa in x){var ra=x[qa];ra.position=o.getElementPosition(ra.element).y;if(!ra.hidden)ra.height=ra.element.offsetHeight;}}function ia(){var qa=[];for(var ra in x){var sa=x[ra],ta=sa.position,ua=ta+sa.height<aa,va=ta>ba;if(!sa.hidden&&(ua||va)){ja(sa);}else if(!ua&&!va){sa.pendingHide=false;if(sa.hidden){if(sa.dirty&&ta<aa){qa.push(ra);h.addClass(ka(sa),"_49nu");}else m.apply(sa.element,{height:'',marginBottom:''});h.show(ka(sa));sa.dirty=false;sa.hidden=false;}}}if(!qa.length)return;var wa=0;r(function(){for(var xa=0,ya=qa.length;xa<ya;xa++){var za=x[qa[xa]];wa+=za.height-ka(za).offsetHeight+m.getFloat(za.element,'marginBottom');}},function(){for(var xa=0,ya=qa.length;xa<ya;xa++){var za=x[qa[xa]];h.removeClass(ka(za),"_49nu");m.apply(za.element,{height:'',marginBottom:''});}wa&&(document.body.scrollTop-=wa);});}function ja(qa){if(!qa.pendingHide){da.push(qa);qa.pendingHide=true;}}function ka(qa){if(qa.wrapperElement)return qa.wrapperElement;var ra=qa.element;if(ra.firstElementChild)return (qa.wrapperElement=ra.firstElementChild);for(var sa=0;sa<ra.childNodes.length;sa++)if(ra.childNodes[sa].tagName)return (qa.wrapperElement=ra.childNodes[sa]);}function la(){var qa=ga()+'px';for(var ra=0;ra<da.length;ra++){var sa=da[ra];if(i.scry(sa.element,"._52fb").length)sa.pendingHide=false;if(sa&&sa.element&&sa.pendingHide&&!sa.hidden){m.apply(sa.element,{height:sa.height+'px',marginBottom:qa});h.hide(ka(sa));sa.hidden=true;sa.pendingHide=false;}}da=[];}function ma(){s(la,'LitestandOffscreenController/hide');r(ha,ia,'LitestandOffscreenController');}function na(qa,ra){var sa=false;ra.forEach(function(ta){var ua=x[ta];if(ua&&ua.hidden){ua.dirty=true;sa=true;if(ua.position>=aa){ua.hidden=false;ua.pendingHide=false;m.apply(ua.element,{height:'',marginBottom:''});h.show(ka(ua));}}});sa&&ia();}function oa(){l.onLeave(ea);z=new n();z.addSubscriptions(g.subscribe(k.NAVIGATION_BEGIN,fa),g.subscribe('LitestandStream/SubstreamsUpdated',na),j.listen(window,'scroll',t(ma)),j.listen(window,'resize',t(function(){ca=null;ma();})));y=true;}var pa={attachSubstream:function(qa){y||oa();x[i.getID(qa)]={element:qa};}};e.exports=pa;},null);
__d("LitestandNewStoryController",["Animation","Arbiter","AsyncRequest","CSS","Event","LitestandMessages","LitestandStream","NavigationMessage","Run","Style","SubscriptionsHandler","TinyViewport","ge","getScrollPosition","memoize","$","queryThenMutateDOM","requestAnimationFrame","NewStoriesPillConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=b('NewStoriesPillConfig').maintain_scroll_position,z=1,aa,ba=500,ca=600,da,ea;function fa(){ea&&clearTimeout(ea);ea=null;}function ga(){ea=setTimeout(function(){ea=null;ha();},ba);}function ha(){var ab;w(function(){ab=m.canInsertNewerStories();},function(){if(ab){xa();}else ga();},'LitestandNewStoryController/tryShowingStories');}var ia=0,ja,ka=true,la;function ma(){if(!la){la=new q();la.addSubscriptions(h.subscribe(n.NAVIGATION_BEGIN,ua),k.listen(window,'resize',na),k.listen(window,'scroll',sa));o.onLeave(ua);}}function na(){if(!pa())ua();}var oa=u(function(){var ab=s('blueBarNAXAnchor');return ab&&j.hasClass(ab,'fixed_elem');});function pa(){return oa()&&!r.isTiny();}function qa(ab,bb){var cb=s(ab);if(cb)cb.style.marginTop=bb?bb+'px':'';}function ra(ab){if(!pa()){ab=0;}else ab=Math.max(ab,0);ia=ab;qa('rightCol',ab);qa('leftCol',ab);}function sa(){var ab=t(window).y;if(ab<=0){ua();return;}if(ab<ia){ka=false;ra(ab);}}function ta(){if(!ka){ja&&ja.stop();ja=null;}}function ua(){if(la){la&&la.release();ka=false;ra(0);la=null;}}function va(ab,bb){ja=new g(ab).from('opacity',0).to('opacity',1).duration(ca);if(bb){ka=true;for(var cb=0;cb<z;cb++)ja.checkpoint(1,ta).from('opacity',1).to('opacity',0).duration(ca).checkpoint().from('opacity',0).to('opacity',1).duration(ca);}ja.go();if(aa)aa.show();}function wa(ab){fa();if(!da)return;if(ab)var bb=t(window),cb=da.nextSibling,db=cb.offsetTop,eb=function(){ra(bb.y+cb.offsetTop-db);window.scrollTo(bb.x,ia);};p.apply(da,{height:'',left:'',overflow:'',position:'',width:''});if(ab){eb();var fb=da;x(function(){ma();eb();va(fb,true);});}else va(da,false);h.inform(l.STORIES_INSERTED);h.inform(l.NEWER_STORIES_INSERTED);setTimeout(function(){h.inform('reflow');},0);new i().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:m.getSectionID()}).send();da=null;h.inform(l.NEW_STORIES_DISPLAYED);}function xa(){wa(y&&pa());}function ya(){wa(false);}var za={waitForDisplay:function(ab){if(!da)da=v(ab);if(m.canInsertNewerStories()){xa();}else ga();},showStoriesNow:function(ab){da=ab;ya();},setNewStoryPill:function(ab){aa=ab;}};e.exports=za;},null);
__d("TrackingData",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='mei',h='ei',i='cmf',j={hasAdToken:function(k){var l=k.getAttribute('data-ft')?JSON.parse(k.getAttribute('data-ft')):null;return l&&(l[g]||l[h]);},setContinueMainFeed:function(k){var l=k.getAttribute('data-ft')?JSON.parse(k.getAttribute('data-ft')):null;if(l){l[i]=1;k.setAttribute('data-ft',JSON.stringify(l));}}};e.exports=j;},null);
__d("LitestandStreamLoader",["Arbiter","AsyncRequest","CSS","csx","cx","DOM","DOMScroll","EntstreamStoryDeduper","Event","FbFeedHighlight","JSXDOM","LitestandMessages","LitestandNewStoryController","LitestandOffscreenController","LitestandStream","NavigationMessage","OnVisible","Run","throttle","UIPagelet","UserActivity","$","copyProperties","ge","getUnboundedScrollPosition","Vector","Parent","TrackingData","WaitBeforeNewStoryQE","NewStoriesPillConfig","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka){b.__markCompiled&&b.__markCompiled();var la;ka(['LiveFeedBar'],function(jc){la=jc;});var ma=false,na={},oa,pa,qa,ra,sa,ta,ua=0,va=false,wa,xa,ya=[],za=false,ab=false,bb,cb,db=false,eb=true,fb,gb=false,hb=false,ib=null,jb=false,kb=50,lb=0,mb,nb;function ob(){x.onLeave(qb);ya=[g.subscribe(r.PILL_VISIBILITY_UPDATED,function(jc,kc){va=kc.pill_visibility;}),g.subscribe(r.NEW_STORIES_DISPLAY_NOW,function(){s.showStoriesNow(nb);}),g.subscribe(r.NEW_STORIES_WAIT_DISPLAY,function(){s.waitForDisplay(l.getID(nb));}),g.subscribe(v.NAVIGATION_BEGIN,qb),g.subscribe(r.NEWER_STORIES_INSERTED,function(){nb=null;}),g.subscribe(r.UNREAD_ONLY_BEGIN,function(jc,kc){jb=true;var lc=pb(),mc=l.scry(bb,".unseenStoriesHeader")[0],nc=[];if(mc&&lc){za=true;var oc=l.scry(ta,u.getStoriesSelector()).slice(kc+1),pc=oc.length,qc=oc.filter(function(ad){return i.hasClass(ad,"_50mx")&&!i.hasClass(ad,"_x72")&&!ha.hasAdToken(ad);}),rc=qc.length,sc=fb.min_stories_to_skip;if(oc.length-qc.length<sc)qc=qc.slice(0,oc.length-qc.length-sc);var tc=qc.length,uc=-1,vc={};if(fb.move_skipped_unseen){var wc=q.div({className:"moved_stories"});qc.forEach(function(ad){var bd=ga.byClass(ad,"_4ikz");vc[l.getID(bd)]=1;l.appendContent(wc,ad);});g.inform('LitestandStream/SubstreamsUpdated',Object.keys(vc));l.insertAfter(mc,wc);uc=l.scry(bb,".moved_stories ._5jmm").length;}nc=l.scry(bb,u.getStoriesSelector());l.insertBefore(lc,bb);i.show(bb);nc.forEach(function(ad){i.show(ad);p.highlight(ad);});n.dedupeHide(u.getStreamRoot(),u.getStoriesSelector(),db);g.inform(r.STORIES_INSERTED);setTimeout(function(){m.scrollTo(mc,800,false,false,10);},0);rb();var xc=nc[0],yc=JSON.parse(xc.getAttribute('data-ft')),zc=yc.qid;sb('load',{all_unseen_stories:nc.length,qid:zc,main_feed_stories_skip:pc,unseen_stories_skipped:rc,unseen_stories_eligible_to_move:tc,unseen_stories_moved:uc});}else{if(!mc)sb('missed_stories_header_unavailable');if(!nc[0])sb('missed_stories_unseen_stories_unavailable');if(!lc)sb('missed_stories_more_pager_unavailable');}})];ma=true;}function pb(){if(pa.parentNode)return pa.parentNode;if(!ta)return;var jc=ta.children.length-1;while(jc>=0){if(ta.children[jc].id.lastIndexOf('more_pager',0)===0)return ta.children[jc];jc--;}return;}function qb(){g.inform(r.LEAVE_HOME);na={};xa=null;ua=0;ya.forEach(g.unsubscribe);ya=[];oa&&oa.remove();sa&&clearTimeout(sa);sa=null;ra=null;nb=null;wa&&wa.remove();wa=null;ma=false;lb=0;za=false;ab=false;hb=false;bb=null;cb=null;db=false;eb=true;fb=null;gb=false;jb=false;ib=null;}function rb(){na={};}function sb(jc,kc){var lc=-1,mc=-1,nc=-1,oc=l.scry(ta,".unread_session"),pc=0,qc=0,rc=null;for(var sc=0;sc<oc.length;++sc){var tc=l.scry(oc[sc],u.getStoriesSelector());for(var uc=0;uc<tc.length;++uc){var vc=tc[uc];if(!vc.getAttribute('data-dedupekey'))continue;++qc;if(i.shown(vc)){++pc;rc=vc;}}}mc=pc-1;if(rc){var wc=JSON.parse(rc.getAttribute('data-ft'));lc=wc.qid;nc=wc.mf_story_key;}var xc={qid:lc,finish_pos:mc,storyid:nc,feed_stream_id:u.getFeedStreamID(),all_unseen_stories:qc,num_unseen_sessions:oc.length};kc=typeof kc!=='undefined'?kc:{};for(var yc in xc)if(typeof kc[yc]==='undefined')kc[yc]=xc[yc];kc.action=jc;new h('/ajax/feed/pill/').setData(kc).send();}function tb(jc){if(sa)return;sa=setTimeout(function(){sa=null;ac();},jc);}function ub(){if(xa&&ra&&xa.pollIntervalMS&&xa.pollIntervalMS>1000){aa.setIdleTime(xa.newStoryIdleTime);tb(xa.pollIntervalMS);}}function vb(){oa=new w(l.find(pa,'a'),gc.bind(null),false,xa.bufferPixels);}function wb(){var jc=ea(window).y;return jc>xa.firstPagerScrollBuffer;}function xb(){if(wb()){vb();wa&&wa.remove();wa=null;}}function yb(){if(jb||!ib)return;var jc=l.scry(ta,u.getStoriesSelector()),kc=ba('leftCol'),lc=fa.getElementPosition(kc).y+fa.getElementDimensions(kc).y,mc=0;for(;mc<jc.length;mc++)if(!i.hasClass(jc[mc],"_2l4l")&&jc[mc].getAttribute('data-ft'))break;while(mc<jc.length&&fa.getElementPosition(jc[mc]).y<lc+kb)mc++;if(jc.length===mc)return;var nc=jc[mc],oc=ib.getElement();l.insertBefore(nc,oc);i.show(oc);ib.reflow();jb=true;}function zb(jc){yb();var kc=l.find(pa,'a');o.listen(kc,'click',function(event){gc();wa&&wa.remove();wa=null;event.preventDefault();});var lc=u.getVisibleStoryCount(ta),mc=xa.maxStories;if(mc&&lc>=mc)return;if(jc&&!wb()){wa=o.listen(window,'scroll',y(xb));}else vb();}function ac(){if(!ra)return;var jc=0;if(la)jc=la.getStoryCount();if(!aa.isActive(xa.newStoryIdleTime)){if(!ja.show_new_stories_pill||jc>=ia.maxNewStories){aa.subscribeOnce(ac);return;}}else if(!aa.isOnTab())if(ia.shouldStop&&jc>=ia.maxNewStories){aa.subscribeOnce(ac);return;}if(aa.hasBeenInactive()){aa.resetActiveStatus();var kc=xa.pollIntervalMS,lc=Date.now()-aa.getLastInActiveEnds();if(lc<kc){tb(kc-lc);return;}}if(ja.show_new_stories_pill){if(!u.canFetchNewerStories()){tb(xa.pollIntervalMS);return;}}else if(!u.canInsertNewerStories()){tb(xa.pollIntervalMS);return;}bc(false);}function bc(jc){if(!ra)return;if(!nb){var kc=u.getStreamRoot();nb=q.div({style:{height:0,width:kc.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});l.prependContent(kc,nb);}var lc=q.div(null);l.prependContent(nb,lc);var mc=xa.crossPage?{crossPage:true}:null;z.loadFromEndpoint('LitestandNewerStoriesPagelet',lc,ca(ra,{cursor:mb,containerID:l.getID(nb),fblogo:jc}),mc);g.inform(r.PILL_PAGELET_REQUEST_SENT);}function cc(){var jc=l.getID(pa);i.addClass(pa,'async_saving');var kc=ec(),lc=kc.cursor,mc=kc.storiesCount;if(na[lc])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+lc);na[lc]=lc;var nc={cursor:lc,preload_next_cursor:cb,pager_config:qa,pager_id:jc,scroll_count:++ua,start_unread_session:za,start_continue_top_news_feed:ab,feed_stream_id:u.getFeedStreamID(),snapshot_time:fb?fb.snapshot_time:null,client_stories_count:mc};za=false;ab=false;z.loadFromEndpoint(xa.pagerController,l.getID(ta),nc,{append:true,automatic:true,usePipe:true,crossPage:xa.crossPage});}function dc(){return fc()[0].getAttribute('data-cursor');}function ec(){var jc=fc();jc=jc.filter(function(lc){return !lc.getAttribute('data-preload_unseen_story');});var kc={};kc.cursor=jc[jc.length-1].getAttribute('data-cursor');kc.storiesCount=jc.length;return kc;}function fc(){var jc=l.scry(ta,u.getStoriesSelector());return jc.filter(function(kc){return kc.getAttribute('data-cursor');});}function gc(){g.inform('FbFeedUnreadPillNavigation/startLoading');cc();oa&&oa.remove();oa=null;}function hc(){if(!bb||!ma)return [];var jc=l.scry(ta,u.getStoriesSelector()),kc=jc.filter(function(nc){return nc.getAttribute('data-dedupekey')&&!i.hasClass(nc,"preloadUnseenStory");}),lc={};for(var mc=0;mc<kc.length;mc++)lc[kc[mc].getAttribute('data-dedupekey')]=1;return l.scry(bb,u.getStoriesSelector()).filter(function(nc){var oc=nc.getAttribute('data-dedupekey'),pc=oc&&!lc[oc];lc[oc]=1;return pc;});}var ic={register:function(jc,kc,lc,mc,nc){ma||ob();xa=u.getStreamConfig(kc);za=false;ab=false;hb=false;bb=null;cb=null;db=false;eb=true;fb=null;gb=false;qa=lc;ta=ba(jc);mb=dc();ib=nc;jb=false;pa=mc;zb(true);ub();},replacePagerConfig:function(jc){qa=jc;},continueTopNewsFeed:function(){ab=true;hb=true;rb();sb('finish');},removeOldPager:function(jc,kc){if(jc)l.remove(ba(jc));i.show(ba(kc));},removeLoadingIndicator:function(jc,kc){var lc=da(jc);if(lc)l.remove(lc);i.show(kc);},moreStoriesInserted:function(jc){g.inform(r.STORIES_INSERTED,{substream_id:jc});var kc=ba(jc);if(hb)l.scry(kc,u.getStoriesSelector()).forEach(ha.setContinueMainFeed);if(u.hideOffscreenSubstreams())t.attachSubstream(kc);},attachNewPager:function(jc){!gb&&n.dedupeHide(u.getStreamRoot(),u.getStoriesSelector(),db);this.loadMoreUnseenStoriesIfNeeded();pa=jc;pa&&zb(false);},setPollerData:function(jc){if(jc){ra=jc;ub();}},headLoadCompleted:function(jc){mb=jc.newCursor;ub();var kc=jc.stories;if(kc&&kc.length>0){for(var lc=kc.length-1;lc>=0;lc--)kc[lc].setAttribute('data-insertion-position',--lb);var mc=u.getStoriesSelector();n.dedupe(u.getStreamRoot(),mc);var nc=l.scry(nb,mc);g.inform('Stream/totalHeadLoadedStories',{count:-lb,hiddenCount:nc.length,fblogo:jc.fblogo});}},registerPreloadUnseenStories:function(jc,kc,lc,mc){bb=jc;cb=kc;db=lc;fb=mc;if(mc)gb=mc.disable_deduper;ic.loadMoreUnseenStoriesIfNeeded();},morePreloadUnseenStories:function(jc,kc,lc){cb=lc;if(jc>0){l.appendContent(bb,kc);this.loadMoreUnseenStoriesIfNeeded();}else{g.inform('FbFeedUnreadPillLoader/removeLoadingPill');g.inform('FbFeedUnreadPillNavigation/removePill');eb=true;sb('not_enough_remove',{all_unseen_stories:jc});}},setStopRecursiveUnseenLoad:function(jc){eb=jc;},loadMoreUnseenStoriesIfNeeded:function(){if(!fb||eb)return;var jc=hc();if(jc.length<fb.min_num){if(!bb||fb.disable_recursive){g.inform('FbFeedUnreadPillNavigation/removePill');eb=true;return;}z.loadFromEndpoint('LitestandUnseenStreamPagelet',bb,{unread_pill_config:fb,next_cursor:cb,mode:1},{append:true,automatic:true,usePipe:true,crossPage:xa.crossPage});}else{g.inform('FbFeedUnreadPillNavigation/enoughLoaded');if(fb.disable_recursive)eb=true;}},forceNewFetch:function(){bc(true);}};e.exports=ic;},null);
__d("collectSubtreeData",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i,j,k,l,m){if(i.offsetWidth===0&&i.offsetHeight===0)return m;var n={};if(i.getAttribute)for(r=0;r<j.length;r++){t=j[r];var o=i.getAttribute(k[t]);if(o){n[t]={};var p=JSON.parse(o);for(var q in l)if(p[q]!==(void 0)){n[t][q]=true;if(m[t]===(void 0))m[t]={};if(m[t][q]===(void 0))m[t][q]=[];if(l[q].length>0)m[t][q].push(l[q]);m[t][q].push('('+p[q]);}}}for(var r=0;r<i.childNodes.length;r++){var s=i.childNodes[r];g(s,j,k,l,m);}for(var t in n)for(var u in n[t]){var v=m[t][u][m[t][u].length-1];if(v.length>0&&v.charAt(0)=='('){m[t][u][m[t][u].length-1]=v.substr(1);}else m[t][u].push(')');}return m;}function h(i,j){var k={};for(var l=0;l<j.length;++l)k[j[l]]='data-'+j[l];var m={tn:"","tn-debug":","},n={};g(i,j,k,m,n);for(var o in n)for(var p in n[o])n[o][p]=n[o][p].join('');return n;}e.exports=h;},null);
__d("recordTNTreeData",["collectSubtreeData"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){var k={},l=g(i,['ft']);for(var m in l.ft){k[m+'_tree']=l.ft[m];if(m==='tn-debug')i.setAttribute('tn-debug_subtree',l.ft[m]);}k.evt_value=i.offsetHeight;if(j)k.offset=Math.max(0,i.offsetTop-j.offsetTop);return k;}e.exports=h;},null);
__d("PhotosUploadWaterfallMixin",["Flash","PhotosUploadWaterfall","copyProperties","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j,l={getUploaderApp:k,getWaterfallID:k,getAdditionalData:function(){return {};},logWaterfallStep:function(m,n,o){h.sendSignal(i({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,flash_version:g.getVersion().join('.'),ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);},logWaterfallStepUsingBanzai:function(m,n,o){h.sendBanzai(i({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);}};e.exports=l;},null);
__d("FilePickerEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={BEGIN:'FilePickerEvent/BEGIN',SELECT_START:'FilePickerEvent/SELECT_START',SELECTED:'FilePickerEvent/SELECTED_FILES',ALBUM_LIMIT_EXCEEDED:'FilePickerEvent/ALBUM_LIMIT_EXCEEDED',SESSION_LIMIT_EXCEEDED:'FilePickerEvent/SESSION_LIMIT_EXCEEDED',SELECT_CANCELED:'FilePickerEvent/SELECT_CANCELED',FALLBACK:'FilePickerEvent/FALLBACK'};},null);
__d("FlashArbiterEvents",["Arbiter","Run"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._flashID=j;this._subscriptions=[];h.onLeave(this.unsubscribeAll.bind(this));}i.prototype.subscribe=function(j,k){"use strict";var l=this._flashID;this._subscriptions.push(g.subscribe(j,function(m,n){if(l===n.divID)k(n);}));return this;};i.prototype.unsubscribeAll=function(){"use strict";while(this._subscriptions.length)g.unsubscribe(this._subscriptions.pop());};e.exports=i;},null);
__d("compareFlashVersions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){return i.replace(/\d+/g,function(j){return '000'.substring(j.length)+j;});}function h(i,j){i=g(i);j=g(j);if(i>j){return 1;}else if(i<j)return -1;return 0;}e.exports=h;},null);
__d("FlashLoadEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={READY:'flash/ready',FAILED:'flash/failed',MOUSE_CANCELED:'UploadEvent/SELECT_CANCELED',MOUSE_DOWN:'UploadEvent/SELECT_DOWN',MOUSE_OUT:'UploadEvent/SELECT_OUT',MOUSE_OVER:'UploadEvent/SELECT_OVER',MOUSE_UP:'UploadEvent/SELECT_UP',ERROR_FLASH_LOAD_TIMEOUT:1,ERROR_FLASH_LOAD_FAILURE:2,ERROR_FLASH_UPGRADE_REQUIRED:3};},null);
__d("UploadEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={UPLOAD_START:'UploadEvent/UPLOAD_START',UPLOAD_HIRES_RESTART:'UploadEvent/UPLOAD_HIRES_RESTART',START:'UploadEvent/START',DONE:'UploadEvent/DONE',ERROR:'UploadEvent/ERROR',FINISHED_UPLOADING:'UploadEvent/FINISHED_UPLOADING',LOADED:'UploadEvent/LOADED',READY:'UploadEvent/READY',UPLOAD_FAILED:'UploadEvent/UPLOAD_FAILED',UPLOAD_PROGRESS:'UploadEvent/UPLOAD_PROGRESS',COMPRESS_PROGRESS:'UploadEvent/COMPRESS_PROGRESS',HI_RES_ATTACH_START:'UploadEvent/HI_RES_ATTACH_START',IMAGE_COMPRESS_ERROR:'UploadEvent/IMAGE_COMPRESS_ERROR',IMAGE_COMPRESS_BEGIN:'UploadEvent/IMAGE_COMPRESS_BEGIN',IMAGE_COMPRESSED:'UploadEvent/IMAGE_COMPRESSED',IMAGE_UPLOAD_ERROR:'UploadEvent/IMAGE_UPLOAD_ERROR',IMAGE_UPLOADED:'UploadEvent/IMAGE_UPLOADED',SELECT_START:'UploadEvent/SELECT_START',SELECT_CANCELED:'UploadEvent/SELECT_CANCELED',IMAGES_SELECTED:'UploadEvent/IMAGES_SELECTED',HEARTBEAT:'UploadEvent/HEARTBEAT',CANCELED_PROCESSING_PHOTO:'UploadEvent/CANCELED_PROCESSING_PHOTO',CANCELED_PHOTO_UPLOADED_ANYWAY:'UploadEvent/CANCELED_PHOTO_UPLOADED_ANYWAY'};e.exports=g;},null);
__d("FlashFilePicker",["Arbiter","ArbiterMixin","AsyncUploadBase","compareFlashVersions","ImageResizer","CSS","FilePickerEvent","Flash","FlashArbiterEvents","FlashLoadEvent","FlashUploaderConfig","HTML","Parent","PhotosUploadWaterfall","PhotosUploadWaterfallErrorCodes","PhotosUploadWaterfallMixin","PhotosUploadWaterfallXMixin","PUWApplications","UploadEvent","URI","PUWSteps","copyProperties","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();function da(ha){for(var ia=0;ia<ha.length;++ia)if(n.checkMinVersion(ha[ia].toString()))return true;return false;}function ea(ha){var ia=s.byClass(ha,'addPhotosDisabled');if(ia){l.removeClass(ia,'addPhotosDisabled');l.addClass(ia,'addPhotosEnabled');}}function fa(ha,ia){ia.style.width=ha.offsetWidth+'px';ia.style.height=ha.offsetHeight+'px';}function ga(ha,ia,ja){this._swfID=ha;this._button=ia;this._waterfallID=ja.qn;this._ref=ja.ref;this._beginInformed=false;this._isReady=false;this._fallbackHref=ja.fallbackHref;if(!da(q.flashVersionInfo.minimumVersion)){this.logWaterfallStep(t.UPGRADE_REQUIRED);this._flashError(u.FLASH_UPGRADE_REQUIRED||25);return;}if(ja.flashObjectsPerVersion)this._constructAndAppendFlashObject(ja.flashObjectsPerVersion);this._flashEvents=new o(this._swfID).subscribe(p.READY,this._handleReady.bind(this)).subscribe(p.FAILED,this._handleFailed.bind(this)).subscribe(p.MOUSE_OVER,this._handleMouseIn.bind(this)).subscribe(p.MOUSE_OUT,this._handleMouseOut.bind(this)).subscribe(y.SELECT_START||'UploadEvent/SELECT_START',this._handleSelectStart.bind(this)).subscribe(y.IMAGES_SELECTED,this._handleSelected.bind(this)).subscribe(y.SELECT_CANCELED,this._handleCancelSelected.bind(this));this._timeout=setTimeout(function(){if(!this._isReady)this._flashError(u.FLASH_LOAD_TIMEOUT||23);}.bind(this),q.flashLoadTimeout);ja.logDetailed&&this.logDetailed();}ba(ga.prototype,h,v,w,{_constructAndAppendFlashObject:function(ha){var ia=ha['default'];delete ha['default'];var ja=Object.keys(ha).sort(function(oa,pa){return j(pa,oa);}),ka=ia;for(var la=0;la<ja.length;la++){var ma=ja[la];if(n.checkMinVersion(ma)){ka=ha[ma];break;}}var na=r.replaceJSONWrapper(ka).getRootNode();this._button.parentNode.appendChild(na);},getUploaderApp:function(){return t.APP_FLASH;},getWaterfallID:function(){return this._waterfallID;},getWaterfallAppName:function(){return x.WEB_FLASH;},getWaterfallSource:function(){return this._ref;},logDetailed:function(){this.logWaterfallStep(t.VERSION,{version:n.getVersion().join('.')});if(i.isSupported()){this.logWaterfallStep(t.ASYNC_AVAILABLE);if(k.isSupported()){this.logWaterfallStep(t.RESIZER_AVAILABLE);}else this.logStep(aa.CLIENT_PROCESS_UNAVAILABLE,{error:'no_resizer'});}else this.logStep(aa.CLIENT_PROCESS_UNAVAILABLE,{error:'no_async_upload'});},_handleReady:function(ha){setTimeout(function(){return fa(this._button,ca(this._swfID));}.bind(this));ea(this._button);this._isReady=true;clearTimeout(this._timeout);g.inform(y.READY,{divID:this._swfID},g.BEHAVIOR_PERSISTENT);},_handleFailed:function(ha){this._flashError(u.FLASH_LOAD_FAILURE||24);},_flashError:function(ha){if(this._fallbackHref){var ia=z(this._fallbackHref).addQueryData({error:ha}).toString();this._button.removeAttribute('rel');this._button.removeAttribute('ajaxify');this._button.setAttribute('href',ia);ea(this._button);}this.logWaterfallStep(t.CLIENT_ERROR,{code:ha,scuba_tags:{fallback_simple:true}});this.logStep(aa.CLIENT_FLOW_FATAL,{error_code:ha,fallback_simple:true});},_handleMouseIn:function(ha){l.addClass(this._button,'selectOver');},_handleMouseOut:function(ha){l.removeClass(this._button,'selectOver');},_handleSelectStart:function(ha){if(!this._beginInformed){this._beginInformed=true;this.inform(m.BEGIN||'FilePickerEvent/BEGIN');}this.inform(m.SELECT_START);},_handleSelected:function(ha){var ia;if(ha.files){ia=ha.files;}else{ia=[{uploadID:ha.divID+'.'}];ia.length=ha.count;}this.inform(m.SELECTED,{sender:this,files:ia},g.BEHAVIOR_PERSISTENT);if(ha.albumLimitExceeded)this.inform(m.ALBUM_LIMIT_EXCEEDED,{},g.BEHAVIOR_PERSISTENT);if(ha.sessionLimitExceeded)this.inform(m.SESSION_LIMIT_EXCEEDED,{},g.BEHAVIOR_PERSISTENT);},_handleCancelSelected:function(ha){this.inform(m.SELECT_CANCELED);}});e.exports=ga;},null);
__d("UploadSession",["AsyncRequest","FilePickerEvent","PhotosUploadWaterfall","PUWSteps","URI","arrayContains"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={};function n(p){"use strict";this._sessionID=p;this._asyncBootstrapped=false;this._controller=null;this._overlay=null;this._pickers=[];this._pendingFileLists=[];this._beginLogged=false;this._albumLimitWasExceeded=false;this._sessionLimitWasExceeded=false;}n.prototype.addFilePicker=function(p){"use strict";if(!l(this._pickers,p)){this._pickers.push(p);p.subscribe(h.BEGIN,function(q,r){if(!this._beginLogged){this._beginLogged=true;p.logWaterfallStep(i.BEGIN);p.logStep(j.CLIENT_FLOW_BEGIN);}}.bind(this));p.subscribe(h.SELECTED,function(q,r){p.logStep(j.CLIENT_SELECT_SUCCESS,{volume:r.files.length});if(this._controller){this._controller.uploadFiles(r.files);}else this._pendingFileLists.push(r);if(this._asyncBootstrapped)return;var s=p._button,t=new k(s.getAttribute('ajaxify'));t.addQueryData('num_selected',r.files.length);g.bootstrap(t.toString(),s,true);this._asyncBootstrapped=true;}.bind(this));p.subscribe(h.SELECT_START,function(){p.logStep(j.CLIENT_SELECT_BEGIN);}.bind(this));p.subscribe(h.SELECT_CANCELED,function(){p.logStep(j.CLIENT_SELECT_CANCEL);if(!this._overlay){p.logStep(j.CLIENT_FLOW_CANCEL);this._beginLogged=false;}}.bind(this));p.subscribe(h.ALBUM_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.albumLimitExceeded();}else this._albumLimitWasExceeded=true;}.bind(this));p.subscribe(h.SESSION_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.sessionLimitExceeded();}else this._sessionLimitWasExceeded=true;}.bind(this));}};n.prototype.addController=function(p){"use strict";this._controller=p;this._asyncBootstrapped=true;var q=(this._controller.getWaterfallID)?this._controller.getWaterfallID():this._controller.getWaterfallConfig().waterfallID,r=(this._controller.getUploaderApp)?this._controller.getUploaderApp():this._controller.getWaterfallConfig().waterfallApp;if(!this._beginLogged){this._beginLogged=true;i.sendSignal({qn:q,step:i.BEGIN,uploader:r});}if(this._pendingFileLists.length){var s=[];this._pendingFileLists.forEach(function(t){s=s.concat(t.files);});this._controller.uploadFiles(s);}else i.sendSignal({qn:q,step:i.OVERLAY_FIRST,uploader:r});if(this._albumLimitWasExceeded)this._controller.albumLimitExceeded();if(this._sessionLimitWasExceeded)this._controller.sessionLimitExceeded();};n.prototype.addOverlay=function(p){"use strict";this._overlay=p;};n.prototype.addOverlayAndController=function(p,q){"use strict";this.addOverlay(p);this.addController(q);};n.addFilePickerToSession=function(p,q){"use strict";o(p).addFilePicker(q);};n.addControllerToSession=function(p,q){"use strict";o(p).addController(q);};n.addOverlayToSession=function(p,q){"use strict";o(p).addOverlay(q);};n.addOverlayAndControllerToSession=function(p,q,r){"use strict";o(p).addOverlayAndController(q,r);};function o(p){if(!m[p])m[p]=new n(p);return m[p];}e.exports=n;},null);
__d("StoryTopicMap",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={},h={registerTopics:function(i,j){g[i]=j;},getTopicsForFTID:function(i){return g[i]||[];}};e.exports=h;},null);
__d("XEventRelatedEventsPivotController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String",required:true}});},null);
__d("XFeedAdsChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});},null);
__d("XPubcontentFeedChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true}});},null);
__d("XPubcontentRelatedShareChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false}});},null);
__d("XPubcontentRelatedVideoChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});},null);
__d("XPubcontentTopicChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/topic_chaining\/",{pivotal_topic_ids:{type:"IntVector",defaultValue:[]}});},null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});},null);
__d("XRelatedGamesChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});},null);
__d("XTopicConversationFeedPivotChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/discussions\/creation_unit\/",{});},null);
__d("PubcontentFeedChainingController",["AggregatedLinkComposerConfig","Arbiter","AsyncRequest","AttachmentRelatedShareConstants","CreateTopicConversationChainingConfig","CSS","cx","DOM","DOMQuery","FeedAdsChainingConfig","PageAdsAttachmentLinkShareConstants","PageLikeButton","PubcontentFeedChainingConfig","PubcontentRelatedShareChainingConfig","PubcontentTopicChainingConfig","StoryInlinePivotChainingConfig","RelatedEventsPivotChainingConfig","StoryTopicMap","UFIFeedbackTargets","UFIUIEvents","XEventRelatedEventsPivotController","XFeedAdsChainingController","XPubcontentFeedChainingController","XPubcontentRelatedShareChainingController","XPubcontentRelatedVideoChainingController","XPubcontentTopicChainingController","XPubcontentInlineStoryPivotChainingController","XRelatedGamesChainingController","XTopicConversationFeedPivotChainingController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){b.__markCompiled&&b.__markCompiled();var ja='ei',ka='ad_fan_page_action',la='ad_like_page_post_action',ma='ad_share_attachment_click_action',na='page_story_like_action',oa='related_share_article_click',pa='related_share_video_click',qa='page_share_like_action',ra='topic_story_like_action',sa='story_click_for_pivot_action',ta='story_like_pivot_action',ua='event_join',va='comment_on_topic_conversation_target_action';function wa(){"use strict";this.$PubcontentFeedChainingController0=s;this.$PubcontentFeedChainingController1=p;this.$PubcontentFeedChainingController2=t;this.$PubcontentFeedChainingController3=u;this.$PubcontentFeedChainingController4=v;this.$PubcontentFeedChainingController5=w;this.$PubcontentFeedChainingController6=k;this.$PubcontentFeedChainingController7={};h.subscribe(r.LIKED,this.$PubcontentFeedChainingController8.bind(this));h.subscribe(z.UFIActionLinkLike,this.$PubcontentFeedChainingController9.bind(this));h.subscribe(z.UFIActionAddComment,this.$PubcontentFeedChainingControllera.bind(this));h.subscribe(j.ARTICLE_CLICK,this.$PubcontentFeedChainingControllerb.bind(this));h.subscribe(j.VIDEO_CLICK,this.$PubcontentFeedChainingControllerc.bind(this));h.subscribe(j.FBVIDEO_CLICK,this.$PubcontentFeedChainingControllerd.bind(this));h.subscribe(j.GAME_CLICK,this.$PubcontentFeedChainingControllere.bind(this));h.subscribe(q.LINK_ATTACHMENT_CLICK,this.$PubcontentFeedChainingControllerf.bind(this));h.subscribe(j.PHOTO_CLICK,this.$PubcontentFeedChainingControllerg.bind(this));h.subscribe(j.EVENT_JOIN,this.$PubcontentFeedChainingControllerh.bind(this));wa.instance=this;}wa.getAdClientTokenIndex=function(){"use strict";return ja;};wa.prototype.$PubcontentFeedChainingController8=function(xa,ya){"use strict";var za=this.findAdClientToken(ya.target);if(za){this.$PubcontentFeedChainingControlleri(ya.target,{origin:ka,actor_id:ya.profile_id,client_token:za});}else this.$PubcontentFeedChainingControllerj(ya.target,{origin:ya.origin,actor_id:ya.profile_id});};wa.prototype.$PubcontentFeedChainingControllera=function(xa,ya){"use strict";if(!ya.feedback)return;var za=this.$PubcontentFeedChainingControllerk(ya.target,{origin:va,data:ya});if(!za)return false;var ab=ia.getURIBuilder().getURI();new i(ab).setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setMethod('POST').setData({story_id:ya.feedback.entidentifier}).send();return true;};wa.prototype.$PubcontentFeedChainingController9=function(xa,ya){"use strict";if(!ya.ft_id)return;if(!this.$PubcontentFeedChainingControllerm(this.findStory(ya.target)))return;y.getFeedbackTarget(ya.ft_id,function(za,ab){var bb=this.findAdClientToken(za);if(bb&&ab.isshare){this.$PubcontentFeedChainingControlleri(za,{actor_id:ab.actorid,origin:la,ft_id:ab.entidentifier,client_token:bb});}else if(ab.isownerpage){this.$PubcontentFeedChainingControllerj(za,{actor_id:ab.actorid,content_id:ab.entidentifier,origin:na});}else if(ab.isshare){this.$PubcontentFeedChainingControllerj(za,{actor_id:ab.actorid,content_id:ab.entidentifier,ft_id:ab.entidentifier,origin:qa});}else{var cb=x.getTopicsForFTID(ab.entidentifier);if(cb&&cb.length>0){this.$PubcontentFeedChainingControllern(za,{ft_id:ab.entidentifier,origin:ra,pivotal_topic_ids:cb});}else this.$PubcontentFeedChainingControllero(za,{origin:ta,ft_id:ab.entidentifier});}}.bind(this,ya.target));};wa.prototype.$PubcontentFeedChainingControllero=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=(ga.getURIBuilder()).setString('origin',ya.origin);if(ya.story_id)ab.setString('storyid',String(ya.story_id));if(ya.ft_id)ab.setString('ftid',String(ya.ft_id));new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab.getURI()).setAllowCrossPageTransition(true).send();return true;};wa.prototype.$PubcontentFeedChainingControllerg=function(xa,ya){"use strict";var za=this;za.$PubcontentFeedChainingControllero(ya.attachment,{origin:sa,story_id:ya.storyid});};wa.prototype.$PubcontentFeedChainingControllerb=function(xa,ya){"use strict";if(g.no_chained_related_stories==='true')return;ya.origin=oa;var za=this,ab=this.findStory(ya.attachment),bb=o.scry(o.getRootElement(),'#initial_browse_result').length>0;if(bb)return;var cb;if(ya.is_right_click){cb=0;}else cb=j.EVENT_DELAY;setTimeout(function(){if(ab){var db=za.findAttachment(ab);if(db)ya.attachment=db;}za.$PubcontentFeedChainingControllerp(ya.attachment,ya);},cb);};wa.prototype.$PubcontentFeedChainingControllerc=function(xa,ya){"use strict";ya.origin=pa;var za=this,ab=this.findStory(ya.attachment);setTimeout(function(){if(ab){var bb=za.findAttachment(ab);if(bb)ya.attachment=bb;}za.$PubcontentFeedChainingControllerp(ya.attachment,ya);},j.EVENT_DELAY);};wa.prototype.$PubcontentFeedChainingControllerd=function(xa,ya){"use strict";ya.origin=pa;var za=this,ab=this.findStory(ya.attachment);setTimeout(function(){if(ab){var bb=za.findAttachment(ab);if(bb)ya.attachment=bb;}za.$PubcontentFeedChainingControllerp(ya.attachment,ya);},j.EVENT_DELAY);};wa.prototype.$PubcontentFeedChainingControllere=function(xa,ya){"use strict";var za=this,ab=this.findStory(ya.attachment);setTimeout(function(){if(ab)var bb=za.findContainer(ab);za.$PubcontentFeedChainingControllerq(ab,ya.global_share_id,n.getID(bb));},j.EVENT_DELAY);};wa.prototype.$PubcontentFeedChainingControllerf=function(xa,ya){"use strict";var za=this.findAdClientToken(ya.attachment);if(za){ya.origin=ma;ya.client_token=za;this.$PubcontentFeedChainingControlleri(ya.attachment,ya);}};wa.prototype.$PubcontentFeedChainingControllerh=function(xa,ya){"use strict";var za=this.findStory(ya.attachment);if(za){var ab=this.findAttachment(za);if(ab)ya.attachment=ab;}this.$PubcontentFeedChainingControllerr(ya.attachment,{origin:ua,event_id:ya.event_id});};wa.prototype.$PubcontentFeedChainingControllers=function(xa){"use strict";return !!(xa&&xa.id&&!l.hasClass(xa,"_sf6")&&!(xa.id in this.$PubcontentFeedChainingController7));};wa.prototype.$PubcontentFeedChainingControllert=function(xa){"use strict";if(!xa)return false;if(xa.origin in this.$PubcontentFeedChainingController0||xa.origin in this.$PubcontentFeedChainingController2||xa.origin in this.$PubcontentFeedChainingController1||xa.origin in this.$PubcontentFeedChainingController4||xa.origin in this.$PubcontentFeedChainingController5||xa.origin in this.$PubcontentFeedChainingController6){return true;}else{var ya=this.$PubcontentFeedChainingController3[xa.origin];if(!ya||!ya.rate)return false;var za=Math.random();if(za>ya.rate)return false;return true;}};wa.prototype.$PubcontentFeedChainingControlleru=function(xa){"use strict";this.$PubcontentFeedChainingController7[xa]=true;};wa.prototype.$PubcontentFeedChainingControllerl=function(xa){"use strict";delete this.$PubcontentFeedChainingController7[xa];};wa.prototype.$PubcontentFeedChainingControllerm=function(xa){"use strict";if(!xa)return false;var ya="_3lkn",za=xa.nextSibling,ab=true;if(za&&za.firstChild){var bb=za.firstChild;ab=!(bb.hasChildNodes()&&l.hasClass(bb,ya));}if(!ab)return false;var cb=xa.children[0],db=xa.children[1],eb="_4_ck";if((cb&&l.hasClass(cb,eb))||(db&&l.hasClass(db,eb)))return false;return true;};wa.prototype.$PubcontentFeedChainingControllerk=function(xa,ya){"use strict";var za=this.findStory(xa);if(!this.$PubcontentFeedChainingControllers(za))return null;if(!this.$PubcontentFeedChainingControllert(ya))return null;this.$PubcontentFeedChainingControlleru(za.id);if(this.isSponsoredStory(za))return null;var ab;if(!ya.continued_chaining){ab=this.findContainer(za);if(!ab)return null;var bb=n.create('div'),cb=n.appendContent(ab,bb);if(cb.length!==1)return null;}else{ab=za;bb=n.create('div');cb=n.insertAfter(ab,bb);n.remove(ab);if(cb.length!==1)return null;}if(ya.is_auto_expand){return {chainingWrapper:cb[0],story:za,is_auto_expand:ya.is_auto_expand};}else return {chainingWrapper:cb[0],story:za};};wa.prototype.$PubcontentFeedChainingControlleri=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=this.findStreamRoot(za.story);if(!ab)return false;var bb=ab.getAttribute('id'),cb=(ba.getURIBuilder()).setString('actor_id',ya.actor_id).setString('origin',ya.origin).setString('ei',ya.client_token).setString('data_ownerid',bb);if(ya.ft_id)cb.setString('ft_id',ya.ft_id);new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(cb.getURI()).send();return true;};wa.prototype.$PubcontentFeedChainingControllerp=function(xa,ya){"use strict";if(!this.$PubcontentFeedChainingControllerm(this.findStory(xa)))return false;var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;l.addClass(za.chainingWrapper,"_3lkn");var ab=null;if(ya.fbvideo_id){ab=ea.getURIBuilder();ab.setInt('fbvideo_id',ya.fbvideo_id);}else{ab=da.getURIBuilder();ab.setInt('global_share_id',ya.global_share_id);}ab.setString('attachment_div_id',n.getID(ya.attachment));if(ya.link_url)ab.setString('link_url',ya.link_url);if(ya.video_div_id)ab.setString('video_div_id',ya.video_div_id);if(ya.share_id)ab.setString('share_id',ya.share_id);var bb=JSON.parse(za.story.getAttribute('data-ft'))||{};if('qid' in bb&&'mf_story_key' in bb){ab.setString('qid',bb.qid);ab.setString('mf_story_key',bb.mf_story_key);}if(ya.is_auto_expand){this.$PubcontentFeedChainingControllerl(za.story.id);ab.setBool('is_auto_expand',ya.is_auto_expand);}var cb=new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab.getURI());bb&&cb.setData(bb);cb.send();return true;};wa.prototype.$PubcontentFeedChainingControllerq=function(xa,ya,za){"use strict";if(!this.$PubcontentFeedChainingControllers(xa))return;this.$PubcontentFeedChainingControlleru(xa.id);var ab=(ha.getURIBuilder()).setInt('app_id',ya).setString('attachment_div_id',za);new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,xa.id)).setURI(ab.getURI()).send();return true;};wa.prototype.$PubcontentFeedChainingControllerj=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=(ca.getURIBuilder()).setString('actor_id',ya.actor_id).setString('origin',ya.origin);if(ya.ft_id)ab.setString('ft_id',ya.ft_id);if(ya.content_id)ab.setString('content_id',ya.content_id);new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab.getURI()).send();return true;};wa.prototype.$PubcontentFeedChainingControllern=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=(fa.getURIBuilder()).setIntVector('pivotal_topic_ids',ya.pivotal_topic_ids).getURI();new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab).send();return true;};wa.prototype.$PubcontentFeedChainingControllerr=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=(aa.getURIBuilder()).setInt('event_id',ya.event_id).setString('attachment_id',n.getID(xa)).getURI();new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab).send();return true;};e.exports=wa;},null);
__d("PubcontentLitestandClassicChainingController",["ContextualThing","DOM","PubcontentFeedChainingController","csx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(){"use strict";if(i!==null)i.apply(this,arguments);}m.prototype.findStory=function(n){"use strict";var o="^div._4-u2",p=h.scry(n,o);return p.length===1?p[0]:null;};m.prototype.isSponsoredStory=function(n){"use strict";var o="._5paw";return h.scry(n,o).length>0;};m.prototype.findAttachment=function(n){"use strict";var o="div._6m2",p="div.iframeEmbed",q=h.scry(n,o)[0]||h.scry(n,p)[0];return q;};m.prototype.findContainer=function(n){"use strict";var o=h.create('div'),p=h.insertAfter(n,o);g.register(o,n);return p.length>=1?p[0]:null;};m.prototype.findStreamRoot=function(n){"use strict";var o="^div._4ikz";return h.scry(n,o)[0];};m.prototype.findAdClientToken=function(n){"use strict";var o=this.findStory(n);if(!o)return null;var p=o.getAttribute('data-ft');if(!p)return null;var q=JSON.parse(p);return q[i.getAdClientTokenIndex()];};e.exports=m;new m();},null);
__d("FeedAdsGapRuleViolationDetection",["Banzai","CSS","csx","cx","DOM","ge","isEmpty","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o='ei',p='qid',q='gap rule violation',r='non violating ads gap',s='first position violation',t='feed load',u='first position invalidation',v='spacing invalidation',w=[],x=[],y=[],z={},aa={registerFeedStories:function(ba,ca){if(ba.containerID=='substream_0'){w=[];x=[];}var da=l(ba.containerID);if(!da)return;z=n(ba.demoAdChecks,z);var ea=k.scry(da,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(fa){return fa!==null;});if(ba.isLoggingEnabled&&ea.length!==0)this._logFeedLoad();if(ba.isNewerStories){w=ea.concat(w);}else w=w.concat(ea);if(m(z)){if(ba.isLoggingEnabled||ba.isFirstPosInvalidationEnabled)this._checkFirstPosViolation(ba,da);if(ba.isLoggingEnabled||ba.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(ba);}},_convertStoryNodeToObject:function(ba){if(h.hasClass(ba,"_170y"))return null;var ca=ba.getAttribute('data-dedupekey');if(z[ca])return null;var da=k.scry(ba,"div._hye"),ea=k.scry(ba,"li._170x"),fa=[];if(da.length!==0){fa=da.map(function(ia){return ia.getAttribute('data-ft');}).filter(function(ia){return ia!==null;});}else if(ea.length!==0){fa=ea.map(function(ia){return ia.getAttribute('data-ft');}).filter(function(ia){return ia!==null;});}else if(ba.getAttribute('data-ft'))fa=[ba.getAttribute('data-ft')];if(!fa.length)return null;var ga=JSON.parse(fa[0]),ha={dataFTArray:fa,dedupKey:ca,isSponsored:!!ga[o],height:ba.offsetHeight,qid:parseInt(ga[p],10),nodeID:ba.id};return ha;},_checkFirstPosViolation:function(ba,ca){while(w.length>0&&w[0].isSponsored){var da={ftArray:w[0].dataFTArray,qid:w[0].qid,nodeid:w[0].nodeID,firstStoryType:ba.firstStoryType},ea=k.scry(ca,'.uiBoxRed')[0];if(ea){var fa=ea.textContent||ea.innerText;if(fa)da.error_msg=fa;}if(ba.isLoggingEnabled&&!(w[0].dedupKey in y)){this._logFirstPosViolation(da);y[w[0].dedupKey]=da;}if(ba.isFirstPosInvalidationEnabled){this._invalidateFirstPosAd(da);w.splice(0,1);}else break;}},_getMinGap:function(ba,ca,da){var ea=Math.min(ba?ba:Number.MAX_VALUE,ca?ca:Number.MAX_VALUE);return ea!==Number.MAX_VALUE?ea:da;},_getStoryDedupKeysJSONString:function(ba,ca){var da=[];for(var ea=ba;ea<=ca;ea++)da.push(w[ea].dedupKey);return JSON.stringify(da);},_checkGapRuleViolation:function(ba){var ca=null,da=null,ea=0;for(var fa=0;fa<w.length;fa++){var ga=w[fa];ea+=ga.height;if(ga.isSponsored){ea-=ga.height;var ha=false;if(ca!==null){var ia=fa-ca,ja=null,ka=this._getMinGap(ba.minGaps[da.dedupKey],ba.minGaps[ga.dedupKey],ba.defaultMinGap);if(ia<ka){ja=q;}else ja=r;var la={ftArray_A:da.dataFTArray,ftArray_B:ga.dataFTArray,dist:ia,pdist:ea,pos:fa+1,qid_A:da.qid,qid_B:ga.qid,event_type:ja,nodeid:ga.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(ca,fa)};if(ba.isLoggingEnabled)if(!(ga.dedupKey in x)||x[ga.dedupKey].event_type!==ja){this._logGapRuleViolation(la);x[ga.dedupKey]=la;}if(ba.isGapRuleInvalidationEnabled&&ja==q){this._invalidateGapRuleViolatedAd(la);ha=true;w.splice(fa--,1);}}if(!ha){ca=fa;da=ga;ea=0;}}}},_logFirstPosViolation:function(ba){var ca={ft:ba.ftArray[0],event_type:s,intValues:{qid:ba.qid},first_story_type:ba.firstStoryType};if(ba.error_msg)ca.error_msg=ba.error_msg;g.post('feed_ads_gap_rule_violation',ca);},_logGapRuleViolation:function(ba){var ca={ft_A:ba.ftArray_A[0],ft_B:ba.ftArray_B[0],event_type:ba.event_type,intValues:{dist:ba.dist,pdist:ba.pdist,pos:ba.pos,qid_A:ba.qid_A,qid_B:ba.qid_B},dedup_keys:ba.dedupKeys};g.post('feed_ads_gap_rule_violation',ca);},_logFeedLoad:function(){var ba={event_type:t};g.post('feed_ads_gap_rule_violation',ba);},_invalidateFirstPosAd:function(ba){h.hide(l(ba.nodeid));var ca={ft_array:ba.ftArray,event_type:u};g.post('feed_ads_gap_rule_violation',ca);},_invalidateGapRuleViolatedAd:function(ba){var ca=l(ba.nodeid);ca&&h.hide(ca);var da={ft_array_A:ba.ftArray_A,ft_array_B:ba.ftArray_B,event_type:v};g.post('feed_ads_gap_rule_violation',da);}};e.exports=aa;},null);
__d("StoryPositionTracking",["DOM","LitestandStream","csx","ge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=0;function l(o,p){var q=JSON.parse(o.getAttribute('data-ft'));if(q){q.insertion_position=p;o.setAttribute('data-ft',JSON.stringify(q));}}function m(o){return g.scry(o,"._5jmm");}var n={registerNewStories:function(o){if(o=='substream_0')k=0;var p=m(j(o)),q=p.length;for(var r=0;r<q;r++)l(p[r],k++);},updateAllStories:function(){var o=m(h.getStreamRoot()),p=o.length;k=0;for(var q=0;q<p;q++)l(o[q],k++);}};e.exports=n;},null);
__d("StreamViewportTracking",["DOM","DOMDimensions","ViewportTracking","ge","recordTNTreeData"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=51;for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";if(i!==null)i.apply(this,arguments);}o.prototype.init=function(p,q){"use strict";if(q)this.$StreamViewportTracking0=q;n.init.call(this,p);this.initSubscriptions();};o.prototype.initSubscriptions=function(){"use strict";};o.prototype.getDataFromConfig=function(p){"use strict";this.isTimetrackingEnabled=1;this.timeout=p.record_delay;};o.prototype.getTimeout=function(){"use strict";return this.timeout;};o.prototype.getStorySelector=function(){"use strict";return '.uiStreamStory';};o.prototype.getAllStories=function(){"use strict";var p=g.scry(this.getStream(),this.getStorySelector());return p.filter(function(q){return q.getAttribute('data-ft');});};o.prototype.getStoryID=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.mf_story_key;};o.prototype.getQueryID=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.qid;};o.prototype.getFBFeedLocations=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.fbfeed_location;};o.prototype.getFBFeedInsertionPosition=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.insertion_position;};o.prototype.getDataToLog=function(p){"use strict";var q={},r=this.getStream();q=k(p,r);var s=p.getAttribute('data-insertion-position');if(s!==null)q.inspos=s;q.evt=l;q.vpv_time=Math.round(Date.now()/1000);var t=g.scry(p,".fbStoryAttachmentImage")[0];if(t){var u=h.getElementDimensions(t);q.story_image_height=u.height;q.story_image_width=u.width;}return {ft:q};};o.prototype.getStream=function(){"use strict";if(this.$StreamViewportTracking0)return this.$StreamViewportTracking0;return j('home_stream');};o.prototype.heartBeatIsEnabled=function(){"use strict";return true;};o.init=function(p,q){"use strict";o.instance=new o();o.instance.init(p,q);};o.getInstance=function(){"use strict";return o.instance;};e.exports=o;},null);
__d("FbFeedAttachmentRelatedShare",["Arbiter","AttachmentRelatedShareConstants","DOM","Event","tidyEvent","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={loadRelatedAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.ARTICLE_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedVideoAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.VIDEO_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedGameAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.GAME_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedAttachmentForStream:function(n){var o=function(event,p){var q=event.getTarget();if(q.getAttribute('target')!=='_blank')return;var r="^div._5pbx",s="^div._5pc9",t=i.scry(q,r)[0]||i.scry(q,s)[0];if(!t)return;g.inform(h.ARTICLE_CLICK,{attachment:t,global_share_id:0,link_url:q.getAttribute('href'),is_right_click:p});};k(j.listen(n,'click',function(event){o(event,false);}));k(j.listen(n,'mousedown',function(event){if(event.which==3||event.button==2)o(event,true);}));},closeButton:function(n,o){k(j.listen(n,'click',function(){i.remove(o);}));}};e.exports=m;},null);
__d("FbFeedViewportTracking",["Arbiter","LitestandMessages","LitestandStream","StreamViewportTracking","csx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in j)if(j.hasOwnProperty(l))n[l]=j[l];var m=j===null?null:j.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=j;function n(){"use strict";if(j!==null)j.apply(this,arguments);}n.prototype.initSubscriptions=function(){"use strict";this.subscriptions.addSubscriptions(g.subscribe([h.STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),g.subscribe(h.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};n.prototype.getStorySelector=function(){"use strict";return "._5jmm";};n.prototype.getStream=function(){"use strict";return i.getStreamRoot();};n.prototype.getSessionID=function(){"use strict";return i.getFeedStreamID();};n.init=function(o){"use strict";n.instance=new n();n.instance.init(o);};n.getInstance=function(){"use strict";return n.instance;};e.exports=n;},null);