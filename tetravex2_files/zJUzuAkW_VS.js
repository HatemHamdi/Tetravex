/*!CK:1030409678!*//*1428305243,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["0Cso4"]); }

__d("XAYMTPanelSaveSettingsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ads\/growth\/aymt\/homepage_panel\/save_settings\/",{time_range:{type:"Enum",enumType:1},ad_account_id:{type:"Int"},promoted_object:{type:"Int"},collapsed:{type:"Int"},dismiss_nux:{type:"Bool",defaultValue:false},flash_insights_dismiss_nux:{type:"Bool",defaultValue:false},refresh_panel:{type:"Bool",defaultValue:false}});},null);
__d("AdvertiserHomePagelet",["AsyncRequest","DOM","URI","XAYMTPanelSaveSettingsController","$"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={init:function(m,n){var o=j.getURIBuilder().setBool('refresh_panel',true).getURI();o.addQueryData(i.getRequestURI().getQueryData());new g().setURI(o).setStatusElement(n).setErrorHandler(function(p){h.setContent(k('pagelet_advertiser_panel'),'');}).send();}};e.exports=l;},null);
__d("LeftNavItemClassicDraggableContainer.react",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j=g.createClass({displayName:"LeftNavItemClassicDraggableContainer",propTypes:{itemID:i.oneOfType([i.string,i.number]).isRequired,section:i.object.isRequired,sortable:i.bool.isRequired,draggableBound:i.object,ItemDraggableBehavior:i.func},render:function(){return (g.createElement("div",{"data-itemid":this.props.itemID},this.props.children));},componentDidMount:function(){if(this.props.sortable)this.createDraggable(this.props);},componentWillReceiveProps:function(k){var l=k,m=l.sortable;if(m){this.createDraggable(k);}else if(!m&&this.draggable){this.draggable.destroy();this.draggable=null;}},createDraggable:function(k){var l=k,m=l.section,n=l.itemID,o=l.draggableBound,p=l.ItemDraggableBehavior;if(p&&!this.draggable)this.draggable=new p(g.findDOMNode(this),m,n,o);}});e.exports=j;},null);
__d("LeftNavItem.react",["Arbiter","DOMContainer.react","Image.react","LeftNavItemClassicDraggableContainer.react","React","URI","XUIButton.react","XUISpinner.react","cx","joinClasses","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r='\u00A0',s='\u00B7',t=k.createClass({displayName:"LeftNavItem",render:function(){var u=this.props,v=u.model,w=u.section,x=v.keys.some(function(ba){return ba===u.selectedKey;}),y=v.keys.some(function(ba){return ba===u.loadingKey;}),z=w.props.id==='pinnedNav',aa=(("sideNavItem")+(' '+"stat_elem")+(x?' '+"selectedItem":'')+(y?' '+"_5afd":''));return (k.createElement("li",{key:v.id,className:aa,"data-sortable":v.sortable,id:"navItem_"+v.id},k.createElement(j,{itemID:v.id,section:w,sortable:z&&u.inEditMode&&v.sortable,draggableBound:this.props.draggableBound,ItemDraggableBehavior:this.props.ItemDraggableBehavior},this._renderBookmarkContent())));},_renderBookmarkContent:function(){var u=this.props.model,v=this.props.section,w=v.props.id==='pinnedNav',x=v.props.id==='bookmarksSeeAllEntSection',y=u.count>0,z=u.auxcontent?k.createElement(h,{key:"auxpopover"},u.auxcontent):null,aa=this._renderCounter(u.count,x),ba=p('linkWrap',y?'hasCount':'noCount'),ca=(("_5afe")+(w&&u.sortable?' '+"sortableItem":'')),da=v.props.id==='foldNav'||v.props.id==='aboveFoldNav',ea=this.props.PopupMenu,fa=null;if(!da&&ea)fa=k.createElement(ea,{key:"popover",navSection:v,navItem:this,editmenu:u.editmenu,loadPopupModules:this.props.loadPopupModules});var ga=null;if(x&&u.subtitle)ga=k.createElement("div",{className:"_1xmt"},r+r+s+r+r,k.createElement(h,null,u.subtitle));var ha=null;if(x&&u.type==='type_page'){var ia=l(u.link.href),ja=l("?ref=hl");ja.setDomain(ia.getDomain());ja.setProtocol(ia.getProtocol());ja.setPath(ia.getPath());ha=k.createElement("form",{action:"/menu/identity_switch",method:"post",rel:"async"},k.createElement("input",{type:"hidden",name:"user_id",value:u.id}),k.createElement("input",{type:"hidden",name:"url",value:ja.toString()}),k.createElement(m,{className:"_85u",use:"confirm",label:q._("Connectez-vous")}));}var ka=[z,fa,k.createElement("div",{key:"link",className:"clearfix"},k.createElement("a",{"data-testid":'left_nav_item_'+u.link.title,className:ca,"data-gt":u.datagt,title:u.link.title,rel:u.link.rel,href:u.link.href,ajaxify:u.link.ajaxify,draggable:"false",onClick:function(){return g.inform('LeftNavController/setItemCount',{item:u,count:0});}},k.createElement("div",{className:"rfloat"},k.createElement(n,{className:"uiSideNavSpinner",showOnAsync:true}),x?null:aa,w&&u.sortable?k.createElement("span",{className:"_upa"}):null),k.createElement("span",{className:"imgWrap"},k.createElement(i,{src:u.image,height:"16",width:"16",draggable:"false",alt:""})),k.createElement("div",{className:ba},u.name,x?aa:null)),ga,ha)];return ka;},_renderCounter:function(u,v){var w=u>0,x=(("count")+(' '+"_5aff")+(!w?' '+"hidden_elem":'')+(v?' '+"mlm":''));return (k.createElement("span",{className:x},k.createElement("span",{className:"countValue fss"},u<=20?u:'20+')));}});e.exports=t;},null);
__d("LeftNavItemPlaceholder.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g.createClass({displayName:"LeftNavItemPlaceholder",render:function(){return (g.createElement("li",{className:"sideNavItem stat_elem"},g.createElement("a",{className:"_5afe clearfix sortableItem"})));}});e.exports=i;},null);
__d("LeftNavSection.react",["Arbiter","Bootloader","InlineBlock.react","LeftNavItem.react","LeftNavItemPlaceholder.react","LeftRight.react","Link.react","React","ReactLayeredComponentMixin","Run","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=null,t=n.createClass({displayName:"LeftNavSection",mixins:[o],getInitialState:function(){return {dragged:false,inEditMode:false,glowingType:null,draggableBound:null,placeholderIdx:-1};},renderLayers:function(){var u=this.props.id==='bookmarksSeeAllEntSection';if(u)return {dragNUX:null};if(!s)p.onLoad(function(){h.loadModules(["LeftNavDragNUX.react"],function(x){if(!s)s=x;setTimeout(this.forceUpdate.bind(this),0);}.bind(this));}.bind(this));var v=this.state.glowingType,w=null;if(v==='add'||v==='sort')if(s)w=n.createElement(s,{contextRef:"sectionBody",nuxType:v,position:"above",alignment:"center"});return {dragNUX:w};},render:function(){var u=this,v=this.props,w=v.selectedKey,x=v.loadingKey,y=v.loadPopupModules,z=v.model,aa=v.ItemDraggableBehavior,ba=v.PopupMenu,ca=z.items,da=this.state,ea=da.inEditMode,fa=da.draggableBound;if(ca.length===0)return null;var ga=1,ha=ca.map(function(na){return (n.createElement(j,{key:na.id,model:na,section:u,selectedKey:w,loadingKey:x,inEditMode:ea,draggableBound:fa,rank:ga++,loadPopupModules:y,ItemDraggableBehavior:aa,PopupMenu:ba}));});if(this.state.placeholderIdx>=0)ha.splice(this.state.placeholderIdx,0,n.createElement(k,{key:"itemplaceholder",ref:"placeholder"}));var ia=this.state.glowingType,ja=(("homeSideNav")+(ia==='add'?' '+"_1492":'')+(ia==='sort'?' '+"_1493":'')+(ia==='remove'?' '+"_1494":'')),ka=(("_bui")+(this._isPinnedSection()?' '+"droppableNav":'')+(!this._isPinnedSection()?' '+"nonDroppableNav":'')+(' '+"_3-8w")+(!ea?' '+"_3-96":'')),la=this._isPinnedSection()?n.createElement("div",{className:"_3hge stat_elem"},n.createElement(m,{className:"navEditDone",onClick:function(){h.loadModules(["LeftNavDragController"],function(){g.inform('LeftNavDragController/toggleEditMode',{section:u});});}},n.createElement("span",{className:"_3hgf"},r._("Termin\u00e9")))):null,ma={nav_items_count:ca.length.toString(),nav_section:this.props.id.toString(),bm_sec:this.props.id.toString()};return (n.createElement("div",{id:this.props.id,className:ja,"data-ft":z.dataft,ref:"sectionBody"},this._renderHeader(),n.createElement("ul",{className:ka,"data-gt":JSON.stringify(ma),"data-ft":z.dataft},ha),la));},_renderHeader:function(){var u=this.props.model,v;if(u.title){var w=u.seeallhref?n.createElement(m,{href:u.seeallhref},n.createElement(l,null,n.createElement("span",{className:"sectionDragHandle"},u.title),u.remainingcount&&!this.state.dragged?n.createElement(i,{className:"_3-91"},n.createElement("div",{className:"_1cwg _5ol3"},u.seealltext)):null)):n.createElement("span",{className:"sectionDragHandle"},u.title);v=n.createElement("h4",{className:"navHeader"},w);}else v=null;return v;},_isPinnedSection:function(){return this.props.id==='pinnedNav';}});e.exports=t;},null);
__d("LeftNavSectionPlaceholder.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g.createClass({displayName:"LeftNavSectionPlaceholder",render:function(){var j={height:this.props.height+'px',width:this.props.width+'px'};return (g.createElement("div",{className:"homeSideNav",style:j},g.createElement("ul",{className:"_bui"})));}});e.exports=i;},null);
__d("LeftNavContainer.react",["Bootloader","LeftNavSection.react","LeftNavSectionPlaceholder.react","React","emptyFunction","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(o){o.setState({loadPopupModules:k});g.loadModules(["LeftNavDragController","LeftNavItemDraggableBehavior"],function(p,q){p.subscribe();o.setState({DragController:p,ItemDraggableBehavior:q});});}var n=j.createClass({displayName:"LeftNavContainer",getInitialState:function(){return {placeholderIdx:-1,placeholderWidth:0,placeholderHeight:0,loadPopupModules:function(){return m(this);}.bind(this),DragController:null,ItemDraggableBehavior:null};},getDragController:function(){return this.props.DragController||this.state.DragController;},getItemDraggableBehavior:function(){return this.props.ItemDraggableBehavior||this.state.ItemDraggableBehavior;},componentDidMount:function(){var o=this.getDragController();if(o)o.subscribe();},componentWillUnmount:function(){var o=this.getDragController();if(o)o.unsubscribe();},render:function(){var o=this.props.model,p=j.createElement(h,{selectedKey:o.selectedKey,loadingKey:o.loadingKey,model:o.pinnedSection,key:"pinnedNav",id:"pinnedNav",ref:"pinnedNav",loadPopupModules:this.state.loadPopupModules,ItemDraggableBehavior:this.getItemDraggableBehavior(),PopupMenu:this.props.PopupMenu}),q=o.sections,r=q.map(function(s){return j.createElement(h,{selectedKey:o.selectedKey,loadingKey:o.loadingKey,model:s,key:s.id,id:s.id,loadPopupModules:this.state.loadPopupModules,ItemDraggableBehavior:this.getItemDraggableBehavior(),PopupMenu:this.props.PopupMenu});}.bind(this));if(this.state.placeholderIdx>-1)r.splice(this.state.placeholderIdx,0,j.createElement(i,{key:"placeholder",width:this.state.placeholderWidth,height:this.state.placeholderHeight}));return (j.createElement("div",null,p,r));},getPinnedSection:function(){var o=this.refs.pinnedNav;l(o);return o;}});e.exports=n;},null);
__d("LeftNavController",["Arbiter","AsyncRequest","ChannelConstants","DOMDimensions","Event","LeftNavConfig","Locale","NavigationMessage","React","Run","SubscriptionsHandler","URI","Vector","$","copyProperties","CSS","cx","debounce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y,z,aa,ba=null,ca,da,ea={init:function(ib,jb){aa=ib;z=jb;var kb=l,lb=kb.Container,mb=kb.DragController,nb=kb.ItemDraggableBehavior;ca=new q();ca.addSubscriptions(k.listen(window,'resize',x(ga,200)),g.subscribe('LeftNavController/toggleFavorite',ua),g.subscribe('LeftNavController/updatePinnedSection',va),g.subscribe('LeftNavController/setItemCount',function(pb,qb){var rb=qb.item,sb=qb.count;return ja(rb,sb);}),g.subscribe(i.getArbiterType('nav_update_counts'),ka),g.subscribeOnce('AsyncLayout/initialized',function(){return da=true;}),g.subscribe(n.NAVIGATION_ITEM_REMOVED,la),g.subscribe(n.NAVIGATION_COMPLETED,ra),g.subscribe(n.NAVIGATION_FAILED,sa),g.subscribe(n.NAVIGATION_COUNT_UPDATE,ta),g.subscribe(n.NAVIGATION_SELECT,qa),g.subscribe('LeftNavController/updateSectionOrder',wa),g.subscribe('LeftNavDragController/toggleEditMode',function(){return v.toggleClass(aa,"_2ryg");}));var ob=db(z.selectedKey);if(ob)ob.count=0;y=o.render(o.createElement(lb,{model:z,DragController:mb,ItemDraggableBehavior:nb,PopupMenu:l.PopupMenu}),aa);ga();p.onLeave(this.uninstall.bind(this));},uninstall:function(){da=false;ca.release();if(y.componentWillUnmount)y.componentWillUnmount();},initPageTransitions:function(ib){ib.registerHandler(function(jb){return da&&ma(jb);},6);},mountSeeAllPayload:function(ib){ba=ib;}};function fa(){y.forceUpdate();}function ga(){if(!aa)return;var ib=s.getElementPosition(aa).x;v.conditionClass(aa,"_3evf",ib<20||(m.isRTL()&&ib+j.getElementDimensions(aa).width<j.getElementDimensions(t('globalContainer')).width));}function ha(ib){z.loadingKey=null;z.selectedKey=ib||z.defaultKey;fa();}function ia(ib){z.loadingKey=ib;fa();}function ja(ib,jb){ib.count=jb;fa();}function ka(ib,jb){var kb=jb.obj,lb=kb.items;lb.forEach(function(mb){var nb=db(mb.key);if(nb)nb.count=nb.count+mb.count;});fa();}function la(ib,jb){var kb;function lb(nb,ob){return nb.keys.some(function(pb){return pb===ob;});}for(var mb=0;mb<z.sections.length;mb++){kb=gb(z.sections[mb].items,function(nb){return lb(nb,jb);});if(kb)break;}gb(z.pinnedSection.items,function(nb){return lb(nb,jb);});fa();}function ma(ib){var jb=eb(ib);return jb&&jb.endpoint&&na(jb,ib);}function na(ib,jb){ia(ib.keys[0]);ja(ib,0);pa(ib.endpoint,u(oa(ib,jb),jb.getQueryData()));return true;}function oa(ib,jb){var kb={};kb.sidecol=true;kb.path=jb.getPath();var lb=fb(ib.keys);lb=lb.text?lb.text:lb.numeric;kb.sk=lb;kb.key=lb;return kb;}function pa(ib,jb){jb.endpoint=ib;g.inform(n.NAVIGATION_BEGIN,{useAjaxPipe:true,params:jb});}function qa(ib,jb){var kb=jb.sk;if(jb.asLoading){ia(kb);}else ha(kb);}function ra(ib,jb){var kb=z.loadingKey;ha(kb);}function sa(ib,jb){ia(null);}function ta(ib,jb){var kb=db(jb&&jb.key);if(kb)ja(kb,jb.hide?0:kb.count+jb.count);}function ua(ib,jb){var kb=ab(jb),lb=z.pinnedSection;if(!kb){if(!ba)return;kb=ba.find(function(pb){return pb.id===jb;});if(!kb)return;kb=u({},kb);kb.pinned=true;lb.items.push(kb);new h().setURI('/ajax/bookmark/add/').setData({id:kb.keys[0]}).send();}else{var mb=za(kb);if(bb(jb)){kb.pinned=false;var nb=lb.items.findIndex(function(pb){return pb.id===kb.id;});if(nb>=0){lb.items.splice(nb,1);if(mb)mb.items.unshift(kb);new h().setURI('/ajax/bookmark/delete/').setData({id:kb.keys[0]}).send();}}else{kb.pinned=true;var ob=mb.items.findIndex(function(pb){return pb.id===kb.id;});if(mb&&ob>=0){mb.items.splice(ob,1);lb.items.push(kb);new h().setURI('/ajax/bookmark/add/').setData({id:kb.keys[0]}).send();}}}fa();}function va(ib,jb){var kb=jb.idOrder,lb=z.pinnedSection,mb=lb.items.filter(function(ob){return !ob.sortable;});kb.forEach(function(ob){var pb=lb.items.find(function(rb){return rb.id===ob;});if(pb){mb.push(pb);}else if(pb=ab(ob)){var qb=za(pb);gb(qb.items,function(rb){return rb.id===pb.id;});mb.push(pb);pb.pinned=true;}});lb.items=mb;var nb=mb.map(function(ob){return ob.keys[0];});new h().setURI('/ajax/bookmark/edit/').setData({ids:nb}).send();fa();}function wa(ib,jb){var kb=jb.idOrder,lb=z.sections;z.sections=kb.reduce(function(mb,nb){var ob=lb.find(function(pb){return pb.id===nb;});if(ob)mb.push(ob);return mb;},[]);new h().setURI('/bookmark/section/edit/').setData({nav_section_names:kb}).send();fa();}function xa(ib){var jb=r.getRequestURI();return ((ib.getDomain()===jb.getDomain())&&(ib.getPath()==='/'||ib.getPath()==='/home.php'));}function ya(ib){if(ib==='pinnedNav'){return z.pinnedSection;}else return (z.sections.filter(function(jb){return jb.id===ib;})[0]);}function za(ib){return ya(hb[ib.type]);}function ab(ib){ib=ib.toString();return cb(function(jb){return jb.id.toString()===ib;});}function bb(ib){ib=ib.toString();var jb=ya('pinnedNav');return jb.items.some(function(kb){return kb.id.toString()===ib;});}function cb(ib){for(var jb=0;jb<z.sections.length;jb++){var kb=z.sections[jb].items.find(ib);if(kb)return kb;}return z.pinnedSection.items.find(ib)||(z.foldSection&&z.foldSection.items.find(ib));}function db(ib){return cb(function(jb){return jb.keys.some(function(kb){return kb===ib;});});}function eb(ib){var jb=ib.getQueryData().sk;if(jb){return db(jb);}else if(xa(ib)){return db(z.defaultKey);}else return cb(function(kb){return kb.path&&kb.path.some(function(lb){return lb===ib.getPath();});});}function fb(ib){var jb=/^(app|group|fl)_/,kb={};for(var lb=0;lb<ib.length;lb++){var mb=jb.test(ib[lb]);if(mb&&!kb.numeric){kb.numeric=ib[lb];}else if(!mb&&!kb.text)kb.text=ib[lb];if(kb.numeric&&kb.text)break;}return kb;}function gb(ib,jb){for(var kb=0;kb<ib.length;kb++)if(jb(ib[kb])){var lb=ib[kb];ib.splice(kb,1);return lb;}return (void 0);}var hb={favorites:'pinnedNav',profiles:'pinnedNav',company:'companyNav',apps:'appsNav',groups:'groupsNav',pages:'pagesNav',lists:'listsNav',interests:'interestsNav',connect_apps:'connectNav',type_user:'pinnedNav',type_group:'groupsNav',type_company:'companyNav',type_page:'pagesNav',type_friend_list:'listsNav',type_interest_list:'interestsNav',type_non_canvas_app:'appsNav',type_facebook_app:'appsNav',type_canvas_app_game:'appsNav',type_canvas_app_non_game:'appsNav',type_curated_feed:'interestsNav',type_game_tool:'appsNav',type_page_tool:'pagesNav',type_pinnable_page_tool:'pagesNav',type_developer:'developerNav',type_developer_tool:'developerNav'};e.exports=ea;},null);
__d("LeftNavDragController",["Arbiter","DOMDimensions","DOMQuery","React","Rect","SubscriptionsHandler","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n,o=function(w,x){var y=x.section;if(!y.state.inEditMode){var z=u(y,true);if(z){z.l=z.r=0;y.setState({draggableBound:z});}}y.setState({inEditMode:!y.state.inEditMode});},p=function(w,x){var y=x.section,z=x.draggable,aa=t(y,z);y.setState({placeholderIdx:aa});},q=function(w,x){var y=x.section,z=x.draggable,aa=t(y,z),ba=y.state.placeholderIdx;if(ba!==aa&&ba!==aa+1){var ca=y.props.model,da=ca.items[aa];g.inform('LeftNavController/updatePinnedSection',{idOrder:s(y,da.id)});}y.setState({placeholderIdx:-1});},r=function(w,x){var y=x.section,z=x.draggable,aa=x.targetItemID,ba=y.props.model,ca=t(y,z);if(ca>=0){var da=ba.items.findIndex(function(fa){return fa.id===aa;}),ea=y.state.placeholderIdx<=da?da+1:da;y.setState({placeholderIdx:ea});}},s=function(w,x){if(!w)return (void 0);var y=w.props.model.items,z=w.state.placeholderIdx,aa=[];y.forEach(function(ba,ca){if(ca===z)aa.push(x);if(ba.sortable&&ba.id!==x)aa.push(ba.id);});if(z===y.length)aa.push(x);return aa;},t=function(w,x){var y=w.props.model,z=x.dom.getAttribute('data-itemid');return (y.items.findIndex(function(aa){return aa.id.toString()===z;}));},u=function(w,x){var y=j.findDOMNode(w),z=i.scry(y,'li.sideNavItem');if(x)z=z.filter(function(ja){return ja.getAttribute('data-sortable')==='true';});if(z.length>0){var aa=z[0],ba=h.getElementDimensions(aa).width,ca=z[z.length-1],da=h.getElementDimensions(ca).height,ea=m.getElementPosition(aa).y,fa=m.getElementPosition(ca).y+da;if(w.state.placeholderIdx>=0){var ga=j.findDOMNode(w.refs.placeholder),ha=m.getElementPosition(ga),ia=h.getElementDimensions(ga);ea=Math.min(ea,ha.y);fa=Math.max(fa,ha.y+ia.height);}return new k(ea,m.getElementPosition(aa).x+ba,fa,m.getElementPosition(aa).x);}else return null;},v={subscribe:function(){if(n)return;n=new l();n.addSubscriptions(g.subscribe('LeftNavDragController/toggleEditMode',o),g.subscribe('LeftNavDragController/onItemEditDraggableGrab',p),g.subscribe('LeftNavDragController/onItemEditDraggableDrop',q),g.subscribe('LeftNavDragController/onItemEditDroppableDragOver',r));},unsubscribe:function(){if(n){n.release();n=null;}}};e.exports=v;},null);
__d("XEventImpressionLoggerAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/events\/{eventid}\/ajax\/impression\/",{eventid:{type:"Int",required:true},acontext:{type:"StringToStringMap",required:true}});},null);
__d("EventImpressionLogger",["Arbiter","AsyncRequest","OnVisible","XEventImpressionLoggerAsyncController","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";this.elem=m;this.options=n;this.initListeners();this.listener=new i(this.elem,this.$EventImpressionLogger0.bind(this),true,0);}l.prototype.initListeners=function(){"use strict";var m=this.options;this.$EventImpressionLogger1=!m.start_signal;if(m.start_signal)g.subscribe(m.start_signal,function(n,o){this.$EventImpressionLogger2=o;this.$EventImpressionLogger1=true;if(this.$EventImpressionLogger2){this.$EventImpressionLogger0();}else if(!this.logged){this.listener.reset();this.listener.checkBuffer();}}.bind(this));if(m.stop_signal)g.subscribe(m.stop_signal,function(){this.$EventImpressionLogger2=null;this.$EventImpressionLogger1=false;}.bind(this));if(m.check_signal)g.subscribe(m.check_signal,function(n,o){this.$EventImpressionLogger2=o;if(this.$EventImpressionLogger2){this.$EventImpressionLogger0();}else if(!this.logged){this.listener.reset();this.listener.checkBuffer();}}.bind(this));};l.prototype.$EventImpressionLogger0=function(){"use strict";var m=this.options;if(!this.$EventImpressionLogger1)return;if(this.logged)return;if(!document.documentElement.contains(this.elem))return;if(this.$EventImpressionLogger2&&this.$EventImpressionLogger2.rect){var n=this.elem.getBoundingClientRect(),o=this.$EventImpressionLogger2.rect,p=0;if(this.$EventImpressionLogger2.scrollTop)p=this.$EventImpressionLogger2.scrollTop;if(o.left&&o.left>n.left)return;if(o.right&&o.right<n.right)return;if(o.top&&o.top>n.top-p)return;if(o.bottom&&o.bottom<n.bottom-p)return;}this.logged=true;var q=j.getURIBuilder().setInt('eventid',m.event_id).setStringToStringMap('acontext',m.action_context).getURI();new h(q).send();};k(l,{init:function(m,n){return new l(m,n);}});e.exports=l;},null);